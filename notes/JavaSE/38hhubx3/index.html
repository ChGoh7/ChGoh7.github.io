<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.14" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();</script><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="icon" href="/images/logo.png"><title>反射 | chgoh7的文档&blog</title><meta name="description" content="chgoh7的文档&blog，记录知识文档和日常博客"><link rel="preload" href="/assets/style-WdsQtL_i.css" as="style"><link rel="stylesheet" href="/assets/style-WdsQtL_i.css"><link rel="modulepreload" href="/assets/app-Cg4GIAk4.js"><link rel="modulepreload" href="/assets/index.html-7YKl9Gon.js"><link rel="prefetch" href="/assets/index.html-DksG5ahC.js" as="script"><link rel="prefetch" href="/assets/index.html-h8lVWtb2.js" as="script"><link rel="prefetch" href="/assets/index.html-BmDINu70.js" as="script"><link rel="prefetch" href="/assets/index.html-DshXYbIm.js" as="script"><link rel="prefetch" href="/assets/index.html-BTatiley.js" as="script"><link rel="prefetch" href="/assets/index.html-K_MK8aFy.js" as="script"><link rel="prefetch" href="/assets/index.html-T8LgyaeE.js" as="script"><link rel="prefetch" href="/assets/index.html-DWW-8pmr.js" as="script"><link rel="prefetch" href="/assets/index.html-CaLW_muQ.js" as="script"><link rel="prefetch" href="/assets/index.html-D1aEpxjp.js" as="script"><link rel="prefetch" href="/assets/index.html-VVeeyet4.js" as="script"><link rel="prefetch" href="/assets/index.html-XiWGS_2R.js" as="script"><link rel="prefetch" href="/assets/index.html-732KUBzH.js" as="script"><link rel="prefetch" href="/assets/index.html-Dcxfdn1L.js" as="script"><link rel="prefetch" href="/assets/index.html-DbcdFZ64.js" as="script"><link rel="prefetch" href="/assets/index.html-ByBxzR03.js" as="script"><link rel="prefetch" href="/assets/index.html-TgZZ6_ql.js" as="script"><link rel="prefetch" href="/assets/index.html-C6otV5UX.js" as="script"><link rel="prefetch" href="/assets/index.html-vbWXsJw7.js" as="script"><link rel="prefetch" href="/assets/index.html-CrRESnz2.js" as="script"><link rel="prefetch" href="/assets/index.html-DVsvbCT4.js" as="script"><link rel="prefetch" href="/assets/index.html-C-Ix_Zll.js" as="script"><link rel="prefetch" href="/assets/index.html-YGj8JmUR.js" as="script"><link rel="prefetch" href="/assets/index.html-COp37gqI.js" as="script"><link rel="prefetch" href="/assets/netlify服务器自定义域名添加自定义证书开启HTTPS的正确方法.html-BEXOi4bv.js" as="script"><link rel="prefetch" href="/assets/index.html-B9UPDdwe.js" as="script"><link rel="prefetch" href="/assets/index.html-DrmFzs58.js" as="script"><link rel="prefetch" href="/assets/index.html-CX9NWIxX.js" as="script"><link rel="prefetch" href="/assets/404.html-Cu_YDbqe.js" as="script"><link rel="prefetch" href="/assets/index.html-BkVAAH_B.js" as="script"><link rel="prefetch" href="/assets/index.html-DA2oiFyg.js" as="script"><link rel="prefetch" href="/assets/index.html-Ce1JLEOd.js" as="script"><link rel="prefetch" href="/assets/index.html-BjbFG5kV.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-2xR-D1yN.js" as="script"><link rel="prefetch" href="/assets/SearchBox-Dq3dl2mC.js" as="script"></head><body><div id="app"><!--[--><div class="theme-plume vp-layout" data-v-f266f3ca><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9ba9c8d4></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-9ba9c8d4> Skip to content </a><!--]--><!----><div class="vp-nav" data-v-f266f3ca data-v-5204fcda><div class="vp-navbar has-sidebar top" data-v-5204fcda data-v-c0ed9090><div class="wrapper" data-v-c0ed9090><div class="container" data-v-c0ed9090><div class="title" data-v-c0ed9090><div class="vp-navbar-title has-sidebar" data-v-c0ed9090 data-v-939e7c42><a class="vp-link link title" href="/" data-v-939e7c42 data-v-574672f1><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/images/logo.png" alt data-v-74d78946><!--]--><!--[--><img class="vp-image light logo" src="/images/logo.png" alt data-v-74d78946><!--]--><!--]--><!--]--><span data-v-939e7c42>chgoh7的文档&amp;blog</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-c0ed9090><div class="content-body" data-v-c0ed9090><!--[--><!--]--><div class="vp-navbar-search search" data-v-c0ed9090><div class="search-wrapper" data-v-f7169ce8><!----><div id="local-search" data-v-f7169ce8><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-f7169ce8><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-c0ed9090 data-v-c3439201><span id="main-nav-aria-label" class="visually-hidden" data-v-c3439201>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-c3439201 data-v-7c98c2da data-v-574672f1><!--[--><!----><span data-v-7c98c2da>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-c3439201 data-v-7c98c2da data-v-574672f1><!--[--><!----><span data-v-7c98c2da>博客</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-c3439201 data-v-beba1669><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-beba1669><span class="text" data-v-beba1669><!----><!----><span data-v-beba1669>文档库</span><span class="vpi-chevron-down text-icon" data-v-beba1669></span></span></button><div class="menu" data-v-beba1669><div class="vp-menu" data-v-beba1669 data-v-7d640523><div class="items" data-v-7d640523><!--[--><!--[--><div class="vp-menu-group" data-v-7d640523 data-v-7bc13655><p class="title" data-v-7bc13655><!----><span data-v-7bc13655>Java相关</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-7bc13655 data-v-26b7eb37><a class="vp-link link" href="/notes/JavaSE/" data-v-26b7eb37 data-v-574672f1><!--[--><!----><i data-v-26b7eb37>JavaSE</i><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-7bc13655 data-v-26b7eb37><a class="vp-link link" href="/notes/JavaEE/" data-v-26b7eb37 data-v-574672f1><!--[--><!----><i data-v-26b7eb37>JavaEE</i><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-7bc13655 data-v-26b7eb37><a class="vp-link link" href="/notes/Microservices/" data-v-26b7eb37 data-v-574672f1><!--[--><!----><i data-v-26b7eb37>微服务</i><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="vp-menu-group" data-v-7d640523 data-v-7bc13655><p class="title" data-v-7bc13655><!----><span data-v-7bc13655>其他</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-7bc13655 data-v-26b7eb37><a class="vp-link link" href="/notes/Others/markdown%E8%AF%AD%E6%B3%95/" data-v-26b7eb37 data-v-574672f1><!--[--><!----><i data-v-26b7eb37>markdown语法</i><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/notes/DevOps/" tabindex="0" data-v-c3439201 data-v-7c98c2da data-v-574672f1><!--[--><!----><span data-v-7c98c2da>开发|运营工具</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-c3439201 data-v-beba1669><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-beba1669><span class="text" data-v-beba1669><!----><!----><span data-v-beba1669>探索</span><span class="vpi-chevron-down text-icon" data-v-beba1669></span></span></button><div class="menu" data-v-beba1669><div class="vp-menu" data-v-beba1669 data-v-7d640523><div class="items" data-v-7d640523><!--[--><!--[--><div class="vp-menu-link" data-v-7d640523 data-v-26b7eb37><a class="vp-link link" href="/Discovery/MyTools/" data-v-26b7eb37 data-v-574672f1><!--[--><!----><i data-v-26b7eb37>我的工具</i><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/Friends/" tabindex="0" data-v-c3439201 data-v-7c98c2da data-v-574672f1><!--[--><!----><span data-v-7c98c2da>友链</span><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-c0ed9090 data-v-69e7a7dc><button class="vp-switch vp-switch-appearance" type="button" role="switch" title="切换为深色主题" aria-checked="false" data-v-69e7a7dc data-v-47c6f954 data-v-a8b7ff70><span class="check" data-v-a8b7ff70><span class="icon" data-v-a8b7ff70><!--[--><span class="vpi-sun sun" data-v-47c6f954></span><span class="vpi-moon moon" data-v-47c6f954></span><!--]--></span></span></button></div><!----><div class="vp-flyout vp-navbar-extra extra" data-v-c0ed9090 data-v-7c170b1b data-v-beba1669><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-beba1669><span class="vpi-more-horizontal icon" data-v-beba1669></span></button><div class="menu" data-v-beba1669><div class="vp-menu" data-v-beba1669 data-v-7d640523><!----><!--[--><!--[--><!----><div class="group" data-v-7c170b1b><div class="item appearance" data-v-7c170b1b><p class="label" data-v-7c170b1b>外观</p><div class="appearance-action" data-v-7c170b1b><button class="vp-switch vp-switch-appearance" type="button" role="switch" title="切换为深色主题" aria-checked="false" data-v-7c170b1b data-v-47c6f954 data-v-a8b7ff70><span class="check" data-v-a8b7ff70><span class="icon" data-v-a8b7ff70><!--[--><span class="vpi-sun sun" data-v-47c6f954></span><span class="vpi-moon moon" data-v-47c6f954></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-c0ed9090 data-v-b3db39d0><span class="container" data-v-b3db39d0><span class="top" data-v-b3db39d0></span><span class="middle" data-v-b3db39d0></span><span class="bottom" data-v-b3db39d0></span></span></button></div></div></div></div><div class="divider" data-v-c0ed9090><div class="divider-line" data-v-c0ed9090></div></div></div><!----></div><div class="vp-local-nav reached-top is-blog" data-v-f266f3ca data-v-dc24d34a><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-dc24d34a><span class="vpi-align-left menu-icon" data-v-dc24d34a></span><span class="menu-text" data-v-dc24d34a>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-dc24d34a data-v-449b7dce><button data-v-449b7dce>返回顶部</button><!----></div></div><aside class="vp-sidebar" data-v-f266f3ca data-v-fb20aff4><div class="curtain" data-v-fb20aff4></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-fb20aff4><span id="sidebar-aria-label" class="visually-hidden" data-v-fb20aff4> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0" data-v-3ea47016 data-v-3f45b044><!----><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>JavaSE</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible is-link" data-v-3ea47016 data-v-3f45b044><div class="item" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/668ugj9i/" data-v-3f45b044 data-v-574672f1><!--[--><h2 class="text" data-v-3f45b044>01 基础</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/fohw3pd2/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>01 Java概述</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/xhlu0hb7/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>02 数据类型和运算符</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/ybo5nhsc/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>03 流程控制</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/p7kpg76z/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>04 方法</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/1qcj742e/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>05 数组</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-3ea47016 data-v-3f45b044><div class="item" role="button" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><h2 class="text" data-v-3f45b044>02 多线程</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/wbmowqny/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>多线程01</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/i7yczwvu/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>多线程02</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-3ea47016 data-v-3f45b044><div class="item" role="button" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><h2 class="text" data-v-3f45b044>03 数据结构</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/x9lnyx6o/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>数据结构</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-3ea47016 data-v-3f45b044><div class="item" role="button" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><h2 class="text" data-v-3f45b044>08 反射</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/38hhubx3/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>反射</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-3ea47016 data-v-3f45b044><div class="item" role="button" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><h2 class="text" data-v-3f45b044>09 注解</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/zgyl249w/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>注解</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-3ea47016 data-v-3f45b044><div class="item" role="button" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><h2 class="text" data-v-3f45b044>12 Java8</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/dt40wstr/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>Java8新特性</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3ea47016><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-3ea47016 data-v-3f45b044><div class="item" role="button" tabindex="0" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><h2 class="text" data-v-3f45b044>15 CommonsLang库常用类</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-3f45b044><span class="vpi-chevron-right caret-icon" data-v-3f45b044></span></div></div><div class="items" data-v-3f45b044><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-3f45b044 data-v-3f45b044><div class="item" data-v-3f45b044><div class="indicator" data-v-3f45b044></div><!----><a class="vp-link link link" href="/notes/JavaSE/xyo8763r/" data-v-3f45b044 data-v-574672f1><!--[--><p class="text" data-v-3f45b044>CommonsLang常用类</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-f266f3ca data-v-328f1c76><div class="has-sidebar has-aside vp-doc-container" data-v-9be9a9b0><!--[--><!--]--><div class="container" data-v-9be9a9b0><div class="aside" data-v-9be9a9b0><div class="aside-curtain" data-v-9be9a9b0></div><div class="aside-container" data-v-9be9a9b0><div class="aside-content" data-v-9be9a9b0><div class="vp-doc-aside" data-v-9be9a9b0 data-v-7b1983db><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-7b1983db data-v-4a7bfa3f><div class="content" data-v-4a7bfa3f><div class="outline-marker" data-v-4a7bfa3f></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-4a7bfa3f><span data-v-4a7bfa3f>此页内容</span><span class="vpi-print icon" data-v-4a7bfa3f></span></div><ul class="root" data-v-4a7bfa3f data-v-fdfcd51c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-7b1983db></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-9be9a9b0><div class="content-container" data-v-9be9a9b0><!--[--><!--]--><main class="main" data-v-9be9a9b0><!--[--><!----><h1 class="vp-doc-title page-title" data-v-6b9e40f4>反射</h1><div class="vp-doc-meta" data-v-6b9e40f4><p class="reading-time" data-v-6b9e40f4><span class="vpi-books icon" data-v-6b9e40f4></span><span data-v-6b9e40f4>2991字</span><span data-v-6b9e40f4>约10分钟</span></p><!----><p class="create-time" data-v-6b9e40f4><span class="vpi-clock icon" data-v-6b9e40f4></span><span data-v-6b9e40f4>2024-08-26</span></p></div><!--]--><div class="vp-doc plume-content _notes_JavaSE_38hhubx3_" data-v-9be9a9b0><h2 id="类的生命周期" tabindex="-1"><a class="header-anchor" href="#类的生命周期"><span>类的生命周期</span></a></h2><ul><li><p>同一个 JVM 中的所有线程、所有变量都处于同一个进程里</p></li><li><p>Java 的核心类库在 jre/lib/rt. jar 文件中</p></li><li><p>类的加载：将类的 class 文件（二进制数据）读入内存，并为之创建一个 java.lang.Class 对象（由类加载器完成）</p></li><li><p>类的连接：把类的二进制数据合并到 JRE 中包括：验证、准备（为类的类变量分配内存并设置默认初始值）、解析</p></li><li><p>类的初始化：对类变量进行初始化包括：声明<strong>类变量</strong>时指定初始值、使用<strong>静态初始化块</strong>为类变量指定初始值（执行顺序与它们在源代码中的排列顺序相同）</p><p><a href="https://sdky.gitee.io/img/%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%87%E7%A8%8B.png" target="_blank" rel="noopener noreferrer"><img src="/assets/efde394d4ef0093c75c3770c8e8e5726-DfYQqfj_.png" alt="类初始化过程"></a> 图 1 类初始化过程</p></li></ul><h2 id="类加载器" tabindex="-1"><a class="header-anchor" href="#类加载器"><span>类加载器</span></a></h2><p><a href="https://sdky.gitee.io/img/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%B1%82%E7%BA%A7%E5%85%B3%E7%B3%BB.png" target="_blank" rel="noopener noreferrer"><img src="/assets/09376a0a6bb9ed990be27b2c60886b57-bC6XsJGf.png" alt="类加载器的层级关系"></a> 图 2 类加载器的层级关系</p><ul><li>启动类加载器（Bootstrap ClassLoader）：该加载器是用 C 语言实现的，负责加载存放在 $JAVA_HOME\jre\lib下，或被 -Xbootclasspath 参数指定的路径中的，并且能被虚拟机识别的类库（如 rt.jar，所有的 java. 开头的类均被 Bootstrap ClassLoader 加载），启动类加载器是无法被 Java 程序直接引用的</li><li>扩展类加载器（Extension ClassLoader）：该加载器由 sun.misc.Launcher$ExtClassLoader 实现，它负责加载 $JAVA_HOME\jre\lib\ext 目录中，或者由 java.ext.dirs 系统变量指定的路径中的所有类库（如 javax.开头的类），开发者可以直接使用扩展类加载器</li><li>应用程序类加载器（Application ClassLoader）：该类加载器由 sun.misc.Launcher$AppClassLoader 来实现，它负责加载用户类路径（ClassPath）所指定的类，开发者可以直接使用该类加载器，如果应用程序中没有自定义过自己的类加载器，一般情况下这个就是程序中默认的类加载器</li></ul><h3 id="双亲委派模型" tabindex="-1"><a class="header-anchor" href="#双亲委派模型"><span>双亲委派模型</span></a></h3><p>如果一个类加载器收到了类加载的请求，它首先不会自己去尝试加载这个类，而是把这个请求<strong>委派给父类加载器</strong>去完成，每一个层次的加载器都是如此，因此所有的类加载请求都会传给顶层的启动类加载器，只有当父载器反馈自己无法完成该加载请求（该加载器的搜索范围中没有找到对应的类）时，子加载器才会尝试自己去加载</p><h2 id="通过反射查看类信息" tabindex="-1"><a class="header-anchor" href="#通过反射查看类信息"><span>通过反射查看类信息</span></a></h2><ul><li>反射：在运行时期，动态地去获取一个类中的信息（类的信息、构造器信息、方法信息、字段等信息）</li></ul><h3 id="获得-class-对象" tabindex="-1"><a class="header-anchor" href="#获得-class-对象"><span>获得 Class 对象</span></a></h3><ul><li>在 JVM 中，一个类用其<strong>全限定类名</strong>和<strong>其类加载器</strong>作为其唯一标识</li><li>包装类和 Void 类的静态字段 TYPE 表示其基本类型的 Class 对象</li><li>所有的具有相同的维数和相同元素类型的数组共享同一个 Class 对象</li><li>使用 Class 类的 <code>Class&lt;?&gt; forName(String className)</code> 类方法（该字符串参数的值是某个类的<strong>全限定类名</strong>，会对类初始化）</li><li>调用某个类的 class 属性来获取该类对应的 Class 对象（所有的数据类型都有 class 属性，包括数组、基本类型以及 <code>void</code>）</li><li>调用某个对象的 <code>Class&lt;?&gt; getClass()</code> 方法（可能需要强转）</li></ul><h3 id="从-class-中获取信息" tabindex="-1"><a class="header-anchor" href="#从-class-中获取信息"><span>从 Class 中获取信息</span></a></h3><ul><li>获取 Class 对应类所包含的构造器（由 Constructor 对象表示）<code>Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;… parameterTypes)</code>：获取此 Class 对象对应类的、<strong>带指定形参列表</strong>的 <code>public</code> 构造器<code>Constructor&lt;T&gt; getDeclaredConstructor(Class&lt;?&gt;.. parameterTypes)</code>：获取此 Class 对象对应类的、<strong>带指定形参列表</strong>的构造器，<strong>与访问权限无关</strong><code>Constructor&lt;?&gt;[] getConstructors()</code>：获取此 Class 对象对应类的所有 <code>public</code> 构造器<code>Constructor&lt;?&gt;[] getDeclaredConstructors()</code>：获取此 Class 对象对应类的所有构造器，<strong>与访问权限无关</strong></li><li>获取 Class 对应类所包含的方法（由 Method 对象表示）<code>Method getMethod(String name, Class&lt;?&gt;.. parameterTypes)</code>：获取此 Class 对象对应类的、带指定形参列表的 <code>public</code> 方法（包括继承的方法）<code>Method getDeclaredMethod(String name, Class&lt;?&gt;.. parameterTypes)</code>：获取此 Class 对象对应类的、<strong>带指定形参列表</strong>的方法，<strong>与访问权限无关</strong>（不包括继承的方法）<code>Method[] getMethods()</code>：获取此 Class 对象所表示的类的所有 <code>public</code> 方法（包括继承的方法）<code>Method[] getDeclaredMethods()</code>：获取此 Class 对象对应类的全部方法，<strong>与访问权限无关</strong>（不包括继承的方法）</li><li>访问 Class 对应类所包含的字符（由 Field 对象表示）<code>Field getField(String name)</code>：获取此 Class 对象对应类的、指定名称的 <code>public</code> 成员变量（包括继承的字段）<code>Field getDeclaredField(String name)</code>：获取此 Class 对象对应类的、指定名称的成员变量，与成员变量的访问权限无关（不包括继承的字符）<code>Field[] getFields()</code>：返回此 Class 对象对应类的所有 <code>public</code> 成员变量（包括继承的字符）<code>Field[] getDeclaredFields()</code>：获取此 Class 对象对应类的全部成员变量，与成员变量的访问权限无关（不包括继承的字符）</li><li>其它实例方法<code>ClassLoader getClassLoader()</code>：获取该类的类加载器<code>Class&lt;?&gt;[] getInterfaces()</code>：获取此 Class 对象所表示的类或接口<strong>实现的接口</strong><code>Class&lt;? super T&gt; getSuperclass()</code>：获取该 Class 对象对应类的超类的 Class 对象<code>int getModifiers()</code>：获取此类或接口的所有修饰符（返回的整数应使用 Modifier 工具类的方法来解码）<code>Package getPackage()</code>：获取此类的包<code>String getName()</code>：以字符串形式返回此 Class 对象所表示的类的名称<code>String getSimpleName()</code>：以字符串形式返回此 Class 对象所表示的<strong>类的简称</strong><code>Class&lt;?&gt; getComponentType()</code>：返回表示数组元素类型的 Class<code>isArray()</code>、<code>isEnum()</code>、<code>isInterface()</code>、<code>isInstance(Object obj)</code>、<code>isAssignableFrom(Class&lt;?&gt; cls)</code></li></ul><h2 id="使用反射生成并操作对象" tabindex="-1"><a class="header-anchor" href="#使用反射生成并操作对象"><span>使用反射生成并操作对象</span></a></h2><ul><li>Constructor、Method、Field 都在 java.lang.reflect 包下，直接父类都是 AccessibleObject</li><li>如果反射的对象需要<strong>调用</strong>对应类中的 <code>private</code> 修饰的构造器、方法或成员变量，应调用 Constructor 对象、Method 对象或 Field 对象的如下方法：<code>void setAccessible(boolean flag)</code>：设置此对象的 accessible 标志为指定的布尔值（值为 true 时，指示反射的对象在使用时<strong>取消访问权限检查</strong>）</li><li>先检查要调用的构造器或方法是否有 public 修饰，再检查是否有 private 修饰</li></ul><h3 id="创建对象" tabindex="-1"><a class="header-anchor" href="#创建对象"><span>创建对象</span></a></h3><ul><li>方式 1：使用 Class 对象的 <code>T newInstance()</code>方法来创建该 Class 对象对应类的实例，要求该 Class对象的对应类有无参数构造器</li><li>方式 2：先使用 Class 对象获取<strong>指定</strong>的构造器 Constructor 对象，再调用 Constructor 对象的<code>T newInstance(Object… initargs)</code>方法来创建该 Class 对象对应类的实例</li></ul><h3 id="调用方法" tabindex="-1"><a class="header-anchor" href="#调用方法"><span>调用方法</span></a></h3><ul><li>先使用 Class 对象获取<strong>指定</strong>的方法 Method 对象，再调用 Method 对象的 invoke() 方法<code>Object invoke(Object obj, Object…args)</code>：该方法中的 obj 是执行该方法的对象，后面的 args 是执行该方法时传入该方法的实参</li><li>如果调用的是类方法，第一个参数设置为 null</li><li>如果调用是数组型参数（形参个数可变）的方法，把实际参数作为 Object[] 的元素再传递，即：<code>Object invoke(执行该方法的对象, new Object[]{ 所有实参 })</code></li><li>返回值的类型是 Object ，可能需要强转</li></ul><h3 id="访问成员变量值" tabindex="-1"><a class="header-anchor" href="#访问成员变量值"><span>访问成员变量值</span></a></h3><ul><li>Field 提供了如下两组方法来读取或设置成员变量值：<code>Object get(Object obj)</code>：获取 obj 对象上此 Field 表示的字段的值<code>xxx getXxx(Object obj)</code>：获取 obj 对象的该成员变量的值（此处的 Xxx 对应 8 种基本类型，如果该成员变量的类型是引用类型，则取消 get 后面的 Xxx）<code>void setXxx(Object obj, Xxx val)</code>：将 obj 对象的该成员变量设置成 val 值（此处的 Xxx 对应 8 种基本类型，如果该成员变量的类型是引用类型，则取消 set 后面的 Xxx）</li></ul><h3 id="操作数组" tabindex="-1"><a class="header-anchor" href="#操作数组"><span>操作数组</span></a></h3><ul><li>在 java. lang. reflect 包下的 Array 类中的类方法：<code>Object newInstance(Class&lt;?&gt;componentType,int…length)</code>：创建一个具有指定的元素类型、指定维度的新数组<code>int getLength(Object array)</code>：以 int 形式返回指定数组对象的长度<code>xxx getXxx(Object array, int index)</code>：返回 array 数组中第 index 个元素<code>void setXxx(Object array, int index, xxx val)</code>：将 array 数组中第 index 个元素的值设为 val</li><li>其中 xxx 是各种基本数据类型，如果数组元素是引用类型，则方法变成<code>get(ObjeCt array, int index)``set(Object array, int index, Object val)</code></li></ul><h2 id="使用反射加载资源文件" tabindex="-1"><a class="header-anchor" href="#使用反射加载资源文件"><span>使用反射加载资源文件</span></a></h2><ul><li>Class 类中的 <code>InputStream getResourceAsStream(String name)</code>：name 不以 &#39;/&#39; 开头时默认是从<strong>当前类的字节码所在的路径</strong>去加载资源，以 &#39;/&#39; 开头则是从 <strong>classpath 的根路径</strong>去加载资源</li><li>ClassLoader 类中的 <code>InputStream getResourceAsStream(String name)</code>：从 <strong>classpath 的根路径</strong>去加载资源，返回所读取资源的输入流，<strong>name 不能以 &#39;/&#39; 开头</strong></li><li>获取 ClassLoader 对象的方法 <ul><li>Class 类中的 <code>ClassLoader getClassLoader()</code>：返回该类的类加载器</li><li>Thread 类中的 <code>ClassLoader getContextClassLoader()</code>：返回该线程的上下文 ClassLoader</li></ul></li></ul><h2 id="使用反射生成-jdk-动态代理" tabindex="-1"><a class="header-anchor" href="#使用反射生成-jdk-动态代理"><span>使用反射生成 JDK 动态代理</span></a></h2><ul><li>通过使用 Proxy 类和 InvocationHandler 接口可以生成 JDK 动态代理类或<strong>动态代理对象</strong>，即在程序中为一个或多个接口动态地生成实现类或创建实例</li><li>特点： <ul><li>代理的对象必须有实现的接口</li><li>需要为每个对象创建代理对象</li><li>动态代理的最小单位是类（所有类中的方法都会被处理）</li></ul></li></ul><h3 id="proxy-类" tabindex="-1"><a class="header-anchor" href="#proxy-类"><span>Proxy 类</span></a></h3><ul><li>构造器：protected Proxy(InvocationHandler h)</li><li>类方法 <ul><li><code>Class&lt;?&gt; getProxyClass(ClassLoader loader, Class&lt;?&gt;… interfaces)</code>：创建一个动态代理类所对应的 Class 对象，该代理类将实现 interfaces 所指定的多个接口（第一个 ClassLoader 参数指定生成动态代理类的类加载器）</li><li><code>Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)</code>：使用指定的 InvocationHandler 创建一个动态代理对象，该代理对象的实现类实现了 interfaces 指定的系列接口，执行代理对象的每个方法时都会被替换执行 InvocationHandler 对象的 invoke 方法</li></ul></li></ul><h3 id="invocationhandler-接口" tabindex="-1"><a class="header-anchor" href="#invocationhandler-接口"><span>InvocationHandler 接口</span></a></h3><ul><li><p>执行动态代理对象的所有方法时，都会被替换成执行 invoke 方法</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Object invoke(Object proxy, Method method, Object[] args)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>proxy：代表动态代理对象</li><li>method：代表正在执行的方法</li><li>args：代表调用目标方法时传入的实参</li></ul></li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> MyInvocationHandler</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> implements</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> InvocationHandler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    private</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Object</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 需要被代理的对象</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 在构造函数中初始化 target 对象</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> MyInvocationHandler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Object </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 执行动态代理对象的所有方法时，都会被替换成执行如下的 invoke 方法</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Object </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invoke</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Object </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">proxy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Method </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">method</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> Object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> throws</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Exception </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ...</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 执行其它方法</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        // 以 target 作为主调来执行 method 方法</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        Object</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> method</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invoke</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ...</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 执行其它方法</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取 JDK 动态代理对象的方法</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> T </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProxyObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    MyInvocationHandler</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> handler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> MyInvocationHandler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 注意：动态创建的代理对象只能赋给 target 所实现的接口类型变量</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Proxy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">newProxyInstance</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClassLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getInterfaces</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> handler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 将 JDK 动态代理生成的 class 字节码输出到本地文件系统</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sun.misc.ProxyGenerator.saveGeneratedFiles</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cglib-动态代理" tabindex="-1"><a class="header-anchor" href="#cglib-动态代理"><span>cglib 动态代理</span></a></h2><ul><li>原理是对指定的目标类生成一个子类，并覆盖其中方法实现增强，但因为采用的是继承，所以不能对 final 标注的类进行代理</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 自定义的 InvocationHandler 需实现 org.springframework.cglib.proxy.InvocationHandler</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取 cglib 动态代理对象的方法</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> T </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProxyObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    MyInvokationHandler</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> handler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> MyInvokationHandler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    handler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setTarget</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Enhancer</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> enhancer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Enhancer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    enhancer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setSuperclass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 设置代理对象需要继承的类</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    enhancer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setCallback</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">handler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 设置代理对象需要回调的方法</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> enhancer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">create</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 创建一个代理对象</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 将 cglib 动态代理生成的 class 字节码输出到本地文件系统</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cglib.debugLocation</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">d:/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></main><footer class="vp-doc-footer" data-v-9be9a9b0 data-v-eff6f19b><!--[--><!--]--><div class="edit-info" data-v-eff6f19b><div class="edit-link" data-v-eff6f19b><a class="vp-link link edit-link-button" href="https://github.com/ChGoh7/ChGoh7.github.io/edit/docs/docs/notes/JavaSE/08 反射/反射.md" target="_blank" rel="noreferrer" data-v-eff6f19b data-v-574672f1><!--[--><span class="vpi-square-pen edit-link-icon" aria-label="edit icon" data-v-eff6f19b></span> 编辑此页<!--]--><!----></a></div><!----></div><div class="contributors" data-v-eff6f19b><span class="contributors-label" data-v-eff6f19b>贡献者: </span><span class="contributors-info" data-v-eff6f19b><!--[--><!--[--><span class="contributor" data-v-eff6f19b>chgoh7</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-eff6f19b><div class="pager" data-v-eff6f19b><a class="vp-link link pager-link prev" href="/notes/JavaSE/x9lnyx6o/" data-v-eff6f19b data-v-574672f1><!--[--><span class="desc" data-v-eff6f19b>上一页</span><span class="title" data-v-eff6f19b>数据结构</span><!--]--><!----></a></div><div class="pager" data-v-eff6f19b><a class="vp-link link pager-link next" href="/notes/JavaSE/zgyl249w/" data-v-eff6f19b data-v-574672f1><!--[--><span class="desc" data-v-eff6f19b>下一页</span><span class="title" data-v-eff6f19b>注解</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-f266f3ca data-v-4486cce5><span class="percent" data-v-4486cce5>0%</span><span class="show icon vpi-back-to-top" data-v-4486cce5></span><svg aria-hidden="true" data-v-4486cce5><circle cx="50%" cy="50%" style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-4486cce5></circle></svg></button><footer class="vp-footer has-sidebar" data-v-f266f3ca data-v-b2971b30><div class="container" data-v-b2971b30><p class="message" data-v-b2971b30>Power by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div></footer><!--[--><!--]--><!--]--></div><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-Cg4GIAk4.js" defer></script></body></html>