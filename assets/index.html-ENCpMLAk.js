import{_ as i,c as a,b as e,o as t}from"./app-B-f8u5un.js";const n="/assets/image-20240911153513507-CCC0gVjP.png",h="/assets/image-20240911154154911-DKCZHrnO.png",l="/assets/image-20240911155735186-BhLxFcBX.png",p="/assets/image-20240911162242669-CPyylVWd.png",d={};function o(c,s){return t(),a("div",null,s[0]||(s[0]=[e('<h2 id="现象" tabindex="-1"><a class="header-anchor" href="#现象"><span>现象</span></a></h2><p>之前打包 ( <code>npm run docs:build</code> ) 这个网站博客项目的时候，遇到了内存溢出的问题</p><p><img src="'+n+`" alt="image-20240911153513507"></p><p>网上也有描述此类情况的，但是错误信息不同：</p><blockquote><p>项目开发中，当项目过大的时候，<code>node</code>内存溢出而停止<code>build</code>项目，即是项目构建过程中频繁报内存溢出：<code>FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - process out of memory</code>。</p></blockquote><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h2><p>既然是内存溢出，就是内存不够用的问题，加内存就可以解决了。</p><p>使用 <code>increase-memory-limit</code> 插件，增加node服务器内存限制</p><ol><li>新增依赖包<code>npm install --save-dev increase-memory-limit</code>，或者在更新package.json后重新 <code>npm install</code> 全量更新依赖包</li><li>执行<code>npm run fix-memory-limit</code>（只需执行一次即可） 重启项目即可</li></ol><div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/* package.json 文件 */</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">devDependencies</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">	&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">increase-memory-limit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">^1.0.6</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">scripts</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	/* 添加 fix-memory-limit */</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fix-memory-limit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cross-env LIMIT=4096 increase-memory-limit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改我的文件：</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">scripts</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">fix-memory-limit</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cross-env LIMIT=4096 increase-memory-limit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">docs:dev</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vuepress dev docs</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">docs:build</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vuepress build docs</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新执行修改内存限制命令时又出现了问题：</p><p><img src="`+h+'" alt="image-20240911154154911"></p><p>看报错，添加依赖<code>npm install -g cross-env</code></p><p>然后运行，新问题又出现（ 出师不利啊 ）：</p><p><img src="'+l+'" alt="image-20240911155735186"></p><p>找到这篇博客</p><p><img src="'+p+'" alt="image-20240911162242669"></p><p>https://blog.csdn.net/qq_40608283/article/details/110183017</p><p>然后评论区又找到一篇博客;https://blog.csdn.net/weixin_46275928/article/details/109725616</p><p>最后还是选择了前者插件的方式然后改prog引用，太麻烦了</p>',22)]))}const k=i(d,[["render",o],["__file","index.html.vue"]]),m=JSON.parse('{"path":"/article/ahfs70hj/","title":"node内存溢出","lang":"zh-CN","frontmatter":{"title":"node内存溢出","tags":["nodejs","FAQ"],"createTime":"2024/09/11 15:33:17","permalink":"/article/ahfs70hj/"},"headers":[],"readingTime":{"minutes":1.33,"words":400},"git":{"updatedTime":1735020969000,"contributors":[{"name":"chgoh7","username":"chgoh7","email":"3180349973@qq.com","commits":6,"avatar":"https://avatars.githubusercontent.com/chgoh7?v=4","url":"https://github.com/chgoh7"}],"changelog":[{"hash":"0d58fa92e647bb5a95ec57d583f1aa0960bb74e4","date":1735020969000,"email":"3180349973@qq.com","author":"chgoh7","message":"docs: new update","commitUrl":"https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/0d58fa92e647bb5a95ec57d583f1aa0960bb74e4"},{"hash":"ba15ffdd3bafbb2c60f0247a9edbc685a3c0aa31","date":1728991726000,"email":"3180349973@qq.com","author":"chgoh7","message":"dosc: remove unclear tags","commitUrl":"https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/ba15ffdd3bafbb2c60f0247a9edbc685a3c0aa31"},{"hash":"1c0844b70eb4c61edee7e89a35aa4bae0ac47e20","date":1726820556000,"email":"3180349973@qq.com","author":"chgoh7","message":"docs: add docs","commitUrl":"https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/1c0844b70eb4c61edee7e89a35aa4bae0ac47e20"},{"hash":"6e40345830b5f0042f6f9d40deb43166f1e36381","date":1726112417000,"email":"3180349973@qq.com","author":"chgoh7","message":"docs: add notest","commitUrl":"https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/6e40345830b5f0042f6f9d40deb43166f1e36381"},{"hash":"ce51c4e6183075ca2b3ab00b50aba25ee4f90611","date":1726053657000,"email":"3180349973@qq.com","author":"chgoh7","message":"docs: add notes","commitUrl":"https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/ce51c4e6183075ca2b3ab00b50aba25ee4f90611"},{"hash":"a1b5e23d3161e890468a0d9a8a08bc8a1d3669f2","date":1726042773000,"email":"3180349973@qq.com","author":"chgoh7","message":"fix: fix fix-memory-limit, add max space size 4096","commitUrl":"https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/a1b5e23d3161e890468a0d9a8a08bc8a1d3669f2"}]},"filePathRelative":"WORK/FRONTEND/nodejs/node内存溢出.md","categoryList":[{"id":"9f20f1","sort":10024,"name":"WORK"},{"id":"5cb7db","sort":10025,"name":"FRONTEND"},{"id":"42743c","sort":10018,"name":"nodejs"}],"bulletin":false}');export{k as comp,m as data};
