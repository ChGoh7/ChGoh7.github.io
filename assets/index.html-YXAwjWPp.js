import{_ as s,c as a,b as t,o as l}from"./app-BlRLZqgX.js";const n="/assets/c9c7b6916647fa6f6d80f1b59230886f-BLsb3Av8.png",e="/assets/21a832b07b34bfece792116ff0cfc805-CLz_y-7C.jpeg",h="/assets/2c404902b2d051ab0fa778a5c356ec0b-OiOwBPWx.png",k="/assets/2807f9a7719a34fe94f6df47511e1e97-B8Qrgee-.png",p="/assets/77e8e3624ab918b5e87a2f74c5c6942d-DZ-9aqGl.png",d="/assets/9c6ecd2698fcfb5bd6428598b3c23e98-BesyEis0.png",r={};function g(o,i){return l(),a("div",null,i[0]||(i[0]=[t('<h2 id="lambda-表达式" tabindex="-1"><a class="header-anchor" href="#lambda-表达式"><span>Lambda 表达式</span></a></h2><ul><li>Lambda 表达式：带有参数变量的表达式</li><li>Lambda 表达式由参数列表、箭头（<code>-&gt;</code>）和 Lambda 主体组成</li><li>基本语法：<code>(parameters) -&gt; expression</code> 或 <code>(parameters) -&gt; { statements; }</code>（注意表达式与语句的区别）</li><li>Java 编译器可以从<strong>上下文</strong>（目标类型）推断出用什么函数式接口来配合 Lambda 表达式，因此可以在 Lambda 语法中省去标注参数类型，当 Lambda 仅有一个类型需要推断的参数时，参数名称两边的括号也可以省略</li><li>在 Lambda 主体中引用的局部变量必须使用 <code>final</code> 修饰或事实上最终的（类似匿名内部类）</li></ul><h3 id="函数式接口" tabindex="-1"><a class="header-anchor" href="#函数式接口"><span>函数式接口</span></a></h3><ul><li>有且仅有一个抽象方法的接口（@FunctionalInterface 注解用于表示该接口会设计成一个函数式接口），如 Comparator、Runnable、Callable</li></ul><h3 id="函数描述符" tabindex="-1"><a class="header-anchor" href="#函数描述符"><span>函数描述符</span></a></h3><ul><li>函数式接口的抽象方法的签名（Lambda 表达式的签名）</li><li>特殊的 void 兼容规则：如果一个 Lambda 的主体是<strong>一个语句表达式</strong>，它就和一个<strong>返回 void</strong>的函数描述符兼容</li></ul><h3 id="使用-lambda" tabindex="-1"><a class="header-anchor" href="#使用-lambda"><span>使用 Lambda</span></a></h3><ul><li>Lambda 表达式以内联的形式为函数式接口的抽象方法提供实现，并把整个表达式作为函数式接口的一个<strong>实例</strong>（即 Lambda 表达式是函数式接口一个具体实现的实例）</li><li>作用：传递代码片段</li><li>注意：只有在<strong>接受函数式接口</strong>的地方才可以使用 Lambda 表达式</li></ul><h3 id="常见的函数式接口" tabindex="-1"><a class="header-anchor" href="#常见的函数式接口"><span>常见的函数式接口</span></a></h3><table><thead><tr><th style="text-align:left;">函数式接口</th><th style="text-align:left;">抽象方法</th><th style="text-align:left;">函数描述符</th><th style="text-align:left;">默认方法</th><th style="text-align:left;">静态方法</th></tr></thead><tbody><tr><td style="text-align:left;"><code>Comparator&lt;T&gt;</code></td><td style="text-align:left;"><code>int compare(T o1, T o2)</code></td><td style="text-align:left;">(T,T) -&gt; int</td><td style="text-align:left;">reversed, thenComparing</td><td style="text-align:left;">naturalOrder, comparing, reverseOrder, nullsFirst, nullsLast</td></tr><tr><td style="text-align:left;">Runnable</td><td style="text-align:left;"><code>void run()</code></td><td style="text-align:left;">() -&gt; void</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>Callable&lt;V&gt;</code></td><td style="text-align:left;"><code>V call()</code></td><td style="text-align:left;">() -&gt; V</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>Predicate&lt;T&gt;</code></td><td style="text-align:left;"><code>boolean test(T t)</code></td><td style="text-align:left;">T -&gt; boolean</td><td style="text-align:left;">and, or, negate</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">BiPredicate&lt;T, U&gt;</td><td style="text-align:left;"><code>boolean test(T t, U u)</code></td><td style="text-align:left;">(T,U) -&gt; boolean</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>Consumer&lt;T&gt;</code></td><td style="text-align:left;"><code>void accept(T t)</code></td><td style="text-align:left;">T -&gt; void</td><td style="text-align:left;">andThen</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">BiConsumer</td><td style="text-align:left;"><code>void accept(T t, U u)</code></td><td style="text-align:left;">(T,U) -&gt; void</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>Supplier&lt;T&gt;</code></td><td style="text-align:left;"><code>T get()</code></td><td style="text-align:left;">() -&gt; T</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>Function&lt;T,R&gt;</code></td><td style="text-align:left;"><code>R apply(T t)</code></td><td style="text-align:left;">T -&gt; R</td><td style="text-align:left;">andThen, compose</td><td style="text-align:left;">identity</td></tr><tr><td style="text-align:left;"><code>BiFunction&lt;T, U, R&gt;</code></td><td style="text-align:left;"><code>R apply(T t, U u)</code></td><td style="text-align:left;">(T,U) -&gt; R</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>UnaryOperator&lt;T&gt;</code></td><td style="text-align:left;"><code>T apply(T t)</code></td><td style="text-align:left;">T -&gt; T</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>BinaryOperator&lt;T&gt;</code></td><td style="text-align:left;"><code>Tt apply(T t1, T t2)</code></td><td style="text-align:left;">(T,T) -&gt; T</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr></tbody></table><h2 id="方法引用" tabindex="-1"><a class="header-anchor" href="#方法引用"><span>方法引用</span></a></h2><ul><li>基本语法：<code>目标引用 :: 方法名</code></li><li>作用：直接传递现有的方法实现</li><li>方法引用主要有四类（仅有一个方法调用的 Lambda 方法体） <ul><li>指向静态方法的方法引用，<code>args -&gt; ClassName.staticMethod(args)</code> 等价 <code>ClassName::staticMethod</code></li><li>指向任意类型的实例方法的方法引用，<code>(arg0, rest) -&gt; arg0.instanceMethod(rest)</code> 等价 <code>ClassName::instanceMethod</code>（arg0 的类型是 ClassName）</li><li>指向现有对象的实例方法的方法引用，<code>args -&gt; expr.instanceMethos(args)</code> 等价 <code>expr::instanceMethod</code></li><li>构造函数引用，<code>ClassName::new</code>（需要有无参构造器）</li></ul></li></ul><h2 id="流" tabindex="-1"><a class="header-anchor" href="#流"><span>流</span></a></h2><ul><li>java.util.stream.Stream</li><li>流：从支持<strong>数据处理操作</strong>的<strong>源</strong>生成的<strong>元素序列</strong></li><li>集合是一个内存中的数据结构，包含数据结构中目前所有的值，其主要目的是以特定的时间/空间复杂度存储和访问元素</li><li>流是在概念上固定的数据结构，其元素是按需计算的（即延迟计算），流的目的在于表达计算</li></ul><blockquote><p>注意：流只能遍历一次</p></blockquote><h3 id="流操作" tabindex="-1"><a class="header-anchor" href="#流操作"><span>流操作</span></a></h3><ul><li>可分为两类操作 <ul><li>中间操作（intermediate operation）：可以连接起来的流操作，中间操作会<strong>返回另一个流</strong></li><li>终端操作（terminal operation）：关闭流的操作，终端操作会从流的流水线生成结果（任何不是流的值）</li></ul></li><li>除非流水线上触发一个终端操作，否则中间操作不会执行任何处理（延迟执行）</li><li>流的使用一般包括三件事： <ul><li>一个数据源（如集合）来执行一个查询</li><li>一个中间操作链，形成一条流的流水线</li><li>一个终端操作，执行流水线，并能生成结果</li></ul></li></ul><h3 id="使用流" tabindex="-1"><a class="header-anchor" href="#使用流"><span>使用流</span></a></h3><p><a href="https://sdky.gitee.io/img/%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C%E5%92%8C%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C.png" target="_blank" rel="noopener noreferrer"><img src="'+n+`" alt="中间操作和终端操作"></a> 图 1 中间操作和终端操作</p><h4 id="筛选" tabindex="-1"><a class="header-anchor" href="#筛选"><span>筛选</span></a></h4><ul><li><code>Stream&lt;T&gt; filter(Predicate&lt;T&gt; predicate)</code>：用谓词筛选，返回一个包括所有符合谓词的元素的流（用谓词筛选）</li><li><code>Stream&lt;T&gt; distinct()</code>：返回一个元素各异（根据流所生成元素的 <strong>hashCode 和 equals 方法</strong>实现）的流（筛选各不相同的元素）</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// distinct elements by property or key</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Predicate</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> distinctByKey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Function</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">?</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> super</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ?</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> keyExtractor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> Boolean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> seen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ConcurrentHashMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> t </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> seen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">putIfAbsent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">keyExtractor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apply</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">t</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Boolean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">TRUE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">filter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">distinctByKey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">b </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="切片" tabindex="-1"><a class="header-anchor" href="#切片"><span>切片</span></a></h4><ul><li><code>Stream&lt;T&gt; limit(long maxSize)</code>：返回一个不超过给定长度的流（截短流）</li><li><code>Stream&lt;T&gt; skip(long n)</code>：返回一个扔掉了前 n 个元素的流（跳过元素）</li></ul><h4 id="映射" tabindex="-1"><a class="header-anchor" href="#映射"><span>映射</span></a></h4><ul><li><p>提取或转换流中的元素</p></li><li><p><code>Stream&lt;R&gt; map(Function&lt;T, R&gt; mapper)</code>：对流中每一个元素应用函数（元素映射为新元素）</p></li><li><p><code>Stream&lt;R&gt; flatMap(Function&lt;T, Stream&lt;R&gt;&gt; mapper)</code>：把一个流中的每个元素都换成另一个<strong>流</strong>，然后把所有转换的流<strong>连接</strong>起来成为一个流（流的扁平化）（元素映射为流）</p></li><li><p><a href="https://sdky.gitee.io/img/Java_8_flatMap_example.jpg" target="_blank" rel="noopener noreferrer"><img src="`+e+`" alt="Java_8_flatMap_example"></a> 图 2 Java_8_flatMap_example</p></li></ul><h4 id="查找和匹配" tabindex="-1"><a class="header-anchor" href="#查找和匹配"><span>查找和匹配</span></a></h4><ul><li><code>boolean allMatch(Predicate&lt;T&gt; predicate)</code>：流中的元素是否都能匹配给定的谓词</li><li><code>boolean anyMatch(Predicate&lt;T&gt; predicate)</code>：流中是否有一个元素能匹配给定的谓词</li><li><code>boolean noneMatch(Predicate&lt;T&gt; predicate)</code>：流中是否没有任何元素与给定的谓词匹配</li><li><code>Optional&lt;T&gt; findAny()</code>：返回当前流中的任意元素</li><li><code>Optional&lt;T&gt; findFirst()</code>：返回当前流中的第一个元素</li></ul><h4 id="归约" tabindex="-1"><a class="header-anchor" href="#归约"><span>归约</span></a></h4><ul><li>将流中所有的元素迭代合并成一个结果</li><li><code>Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator)</code></li><li><code>T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code>：初始值 identity，accumulator 将两个流元素结合起来并产生一个新值（适用于不可变的归约）</li><li><code>U reduce(U identity, BiFunction&lt;U, T, U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)</code>：</li><li><code>Optional&lt;T&gt; min(Comparator&lt;T&gt; comparator)</code>：根据提供的 Comparator 返回此流的最小元素</li><li><code>Optional&lt;T&gt; max(Comparator&lt;T&gt; comparator)</code>：根据提供的 Comparator 返回此流的最大元素</li><li><code>R collect(Collector&lt;T, A, R&gt; collector)</code></li><li><code>R collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R, T&gt; accumulator, BiConsumer&lt;R, R&gt; combiner)</code>：自定义收集器的供应源 supplier、累加器 accumulator、组合器 combiner</li></ul><h5 id="collector-接口" tabindex="-1"><a class="header-anchor" href="#collector-接口"><span>Collector 接口</span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// T - 流中元素的类型，A - 累加器的类型，R - 收集操作的结果对象的类型</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> interface</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Collector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> R</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Supplier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> supplier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 建立新的结果容器</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    BiConsumer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> accumulator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 将元素添加到结果容器（累加器是原位更新）</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    BinaryOperator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> combiner</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 合并两个结果容器</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> R</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> finisher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 对结果容器应用最终转换</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Set</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Collector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Characteristics</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> characteristics</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 定义收集器的行为：UNORDERED、CONCURRENT、IDENTITY_FINISH</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // UNORDERED——归约结果不受流中元素的遍历和累积顺序的影响</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // CONCURRENT——accumulator 函数可以从多个线程同时调用，且该收集器可以并行归约流（如果收集器没有标为 UNORDERED，则仅在用于无序数据源时才可以并行归约）</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // IDENTITY_FINISH——完成器方法返回的函数是一个恒等函数，可以跳过，即累加器对象 A 将会直接用作归约过程的最终结果 R</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="自定义收集" tabindex="-1"><a class="header-anchor" href="#自定义收集"><span>自定义收集</span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 方法 1：自定义 Collector</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> ToListCollector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> implements</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Collector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Override</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Supplier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> supplier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ArrayList</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::new</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 创建集合操作的起始点</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Override</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> BiConsumer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> accumulator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> List</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 累积遍历过的项目，原位修改累加器</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Override</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> BinaryOperator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> combiner</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">list1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> list2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            list1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">addAll</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">list2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 修改第一个累加器，将其与第二个累加器的内容合并</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> list1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 返回修改后的第一个累加器</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        };</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Override</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">T</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> finisher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">identity</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 恒等函数</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Override</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Set</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Characteristics</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> characteristics</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        // 为收集器添加 IDENTITY_FINISH和 CONCURRENT标志</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Collections</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">unmodifiableSet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EnumSet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">of</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">IDENTITY_FINISH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CONCURRENT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Dish</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dishes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> menuStream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">collect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ToListCollector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Dish</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;());</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 方法 2：对于 CONCURRENT 和 IDENTITY_FINISH 但并非 UNORDERED 的收集操作</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Dish</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dishes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> menuStream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">collect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ArrayList</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::new</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> List</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> List</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">addAll</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="预定义收集器" tabindex="-1"><a class="header-anchor" href="#预定义收集器"><span>预定义收集器</span></a></h5><ul><li>Collectors 实用类中提供了很多静态工厂方法用于创建常见的收集器 collector 的实例，这些收集器主要提供三大功能</li><li>将流元素归约和汇总为一个值 <ul><li>计算流中元素的个数：Collectors.counting</li><li>最大值和最小值：Collectors.maxBy、Collectors.minBy，返回类型是 Optional</li><li>汇总：求和 Collectors.summingInt、Collectors.summingLong、Collectors.summingDouble；求平均数 Collectors.averagingInt、Collectors.averagingLong、Collectors.averagingDouble</li><li>收集关于流中元素 Integer 属性的统计值（元素个数、总和、平均值、最大值、最小值等）：Collectors.summarizing</li><li>连接对流中每个元素调用 toString 方法所生成的字符串：Collectors.joining</li><li><strong>广义的归约汇总</strong>：<code>Collector&lt;T, ?, Optional&lt;T&gt;&gt; reducing(BinaryOperator&lt;T&gt; op)\`\`Collector&lt;T, ?, T&gt; reducing(T identity, BinaryOperator&lt;T&gt; op)\`\`Collector&lt;T, ?, U&gt; reducing(U identity, Function&lt;T, U&gt; mapper, BinaryOperator&lt;U&gt; op)</code>：归约操作的起始值 identity（也是流中没有元素时的返回值），转换函数 mapper，累积函数 op 将两个转换得到的结果累积成一个同类型的值（使用于可变的归约）</li></ul></li><li>元素分组 <ul><li><code>Collector&lt;T, ?, Map&lt;K, List&lt;T&gt;&gt;&gt; groupingBy(Function&lt;T, K&gt; classifier)</code>：分组函数 classifier 把流中的元素分成不同的组，把分组函数<strong>返回的值</strong>作为映射的键，把流中所有具有这个分类值的元素的<strong>列表</strong>作为对应的映射值，<code>groupingBy(f)</code> 实际上是 <code>groupingBy(f, toList())</code> 的简便写法（注意：分组函数的返回值即映射的键<strong>不能为 null</strong>）</li><li><code>Collector&lt;T, ?, Map&lt;K, D&gt;&gt; groupingBy(Function&lt;T, K&gt; classifier, Collector&lt;T, A, D&gt; downstream)</code>：<strong>下游的收集器 downstream</strong> 对<strong>分到同一组中的所有流元素</strong>执行进一步归约操作，可实现<strong>多级分组</strong>、<strong>按子组收集数据</strong>等</li></ul></li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> Summary</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sumMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> stuList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">collect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Collectors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">groupingBy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Student</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">getClassName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        Collectors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">groupingBy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Student</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">getGender</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            Collectors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">collectingAndThen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Collectors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> stus </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> score1Total</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> score2Total </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Student</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> student</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> :</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> stus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    score1Total </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">+=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> student</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getScore1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    score2Total </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">+=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> student</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getScore2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                // int score1Total = stus.stream().mapToInt(Student::getScore1).sum();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                // int score2Total = stus.stream().mapToInt(Student::getScore2).sum();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                Student</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> stu</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> stus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                return</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Summary</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stu</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClassName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> stu</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getGender</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> score1Total</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> score2Total</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>元素分区 <ul><li><code>Collector&lt;T, ?, Map&lt;Boolean, List&lt;T&gt;&gt;&gt; partitioningBy(Predicate&lt;T&gt; predicate)</code>：分区函数 predicate，得到的分组 Map 的键类型是 Boolean，最多可以分为两组</li><li><code>Collector&lt;T, ?, Map&lt;Boolean, D&gt;&gt; partitioningBy(Predicate&lt;T&gt; predicate, Collector&lt;T, A, D&gt; downstream)</code></li></ul></li><li>其它 <ul><li><code>Collector&lt;T, ?, List&lt;T&gt;&gt; toList()</code>：把流中所有元素收集到一个 List</li><li><code>Collector&lt;T, ?, Set&lt;T&gt;&gt; toSet()</code>：把流中所有元素收集到一个 Set，删除重复项</li><li><code>Collector&lt;T, ?, Map&lt;K, U&gt;&gt; toMap(Function&lt;T, K&gt; keyMapper, Function&lt;T, U&gt; valueMapper)</code></li><li><code>Collector&lt;T, ?, Map&lt;K, U&gt;&gt; toMap(Function&lt;T, K&gt; keyMapper, Function&lt;T, U&gt; valueMapper, BinaryOperator&lt;U&gt; mergeFunction)</code></li><li><code>Collector&lt;T, ?, M&gt; toMap(Function&lt;T, K&gt; keyMapper, Function&lt;T, U&gt; valueMapper, BinaryOperator&lt;U&gt; mergeFunction, Supplier&lt;M&gt; mapSupplier)</code>：keyMapper - 产生 key 的映射函数；valueMapper - 产生 value 的映射函数（产生的 <strong>value 不能为 null</strong>）；mergeFunction - 一个合并函数，用于解决与<strong>相同 key</strong> 相关联的 value 之间的冲突，提供给 <code>Map.merge(Object, Object, BiFunction)</code>；mapSupplier - 返回一个新的空的 Map 的函数，其中将插入结果</li><li><code>Collector&lt;T, ?, C&gt; toCollection(Supplier&lt;C&gt; collectionFactory)</code>：把流中所有项目收集到给定的供应源创建的集合</li><li><code>Collector&lt;T, A, RR&gt; collectingAndThen(Collector&lt;T, A, R&gt; downstream, Function&lt;R, RR&gt; finisher)</code>：<strong>包裹另一个收集器</strong>，对其结果应用转换函数 finisher <strong>把收集器的结果转换为另一种类型</strong></li><li><code>Collector&lt;T, ?, R&gt; mapping(Function&lt;T, U&gt; mapper, Collector&lt;U, A, R&gt; downstream)</code>：mapper 对流中的元素做变换，downstream 将变换的结果对象收集起来 <a href="https://sdky.gitee.io/img/Collectors%E7%B1%BB%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95.png" target="_blank" rel="noopener noreferrer"><img src="`+h+`" alt="Collectors类中的静态工厂方法"></a> 图 3 Collectors类中的静态工厂方法</li></ul></li></ul><h4 id="其它" tabindex="-1"><a class="header-anchor" href="#其它"><span>其它</span></a></h4><ul><li><code>long count()</code>：返回此流中的元素数</li><li><code>void forEach(Consumer&lt;T&gt; action)</code>：对此流的每个元素执行操作</li><li><code>void forEachOrdered(Consumer&lt;T&gt; action)</code>：按流中元素的顺序对此流的每个元素执行操作</li><li><code>Stream&lt;T&gt; sorted()</code>：返回由此流的元素组成的流，根据自然顺序排序（要求流中元素的类型必须实现 Comparable 接口）</li><li><code>Stream&lt;T&gt; sorted(Comparator&lt;T&gt; comparator)</code>：返回由此流的元素组成的流，根据提供的 Comparator 进行排序</li><li><code>S unordered()</code>：把有序流变成无序流，S 是 BaseStream 的实现类型</li><li><code>Stream&lt;T&gt; peek(Consumer&lt;T&gt; action)</code>：返回由该流的元素组成的流，另外在从生成的流中<strong>消耗元素</strong>时对每个元素执行提供的操作（拆分）</li><li><code>Object[] toArray()</code>：返回一个包含此流的元素的数组</li></ul><h4 id="静态方法" tabindex="-1"><a class="header-anchor" href="#静态方法"><span>静态方法</span></a></h4><ul><li><code>Stream&lt;T&gt; concat(Stream&lt;T&gt; a, Stream&lt;T&gt; b)</code>：合并两个流</li></ul><h3 id="数值流" tabindex="-1"><a class="header-anchor" href="#数值流"><span>数值流</span></a></h3><ul><li>流有三种基本的原始类型特化：IntStream、DoubleStream 和 LongStream，流中的元素类型分别为 int、long 和 double</li><li>原始类型流映射到数值流 <ul><li><code>IntStream mapToInt(ToIntFunction&lt;T&gt; mapper)</code></li><li><code>LongStream mapToLong(ToLongFunction&lt;T&gt; mapper)</code></li><li><code>DoubleStream mapToDouble(ToDoubleFunction&lt;T&gt; mapper)</code></li></ul></li><li>数值流转换回对象流 <ul><li><code>Stream&lt;Integer&gt; boxed()</code>、<code>Stream&lt;Long&gt; boxed()</code>、<code>Stream&lt;Double&gt; boxed()</code>：装箱</li><li><code>Stream&lt;U&gt; mapToObj(IntFunction&lt;U&gt; mapper)</code>、<code>Stream&lt;U&gt; mapToObj(LongFunction&lt;U&gt; mapper)</code>、<code>Stream&lt;U&gt; mapToObj(DoubleFunction&lt;U&gt; mapper)</code></li></ul></li><li>数值流之间的相互转换 <ul><li><code>LongStream mapToLong(IntToLongFunction mapper)</code>、<code>IntStream mapToInt(LongToIntFunction mapper)</code></li><li><code>DoubleStream mapToDouble(IntToDoubleFunction mapper)</code>、<code>DoubleStream mapToDouble(LongToDoubleFunction mapper)\`\`IntStream mapToInt(DoubleToIntFunction mapper)</code>、<code>LongStream mapToLong(DoubleToLongFunction mapper)</code></li></ul></li></ul><h4 id="类方法" tabindex="-1"><a class="header-anchor" href="#类方法"><span>类方法</span></a></h4><ul><li><code>IntStream range(int startInclusive, int endExclusive)</code>、<code>LongStream range(long startInclusive, long endExclusive)</code>：生成某个范围内的数字，不包含结束值</li><li><code>IntStream rangeClosed(int startInclusive, int endInclusive)</code>、<code>LongStream rangeClosed(long startInclusive, long endInclusive)</code>：生成某个范围内的数字，包含结束值</li></ul><h4 id="实例方法" tabindex="-1"><a class="header-anchor" href="#实例方法"><span>实例方法</span></a></h4><ul><li><code>OptionalInt max()</code>、<code>OptionalLong max()</code>、<code>OptionalDouble max()</code>：求最大值</li><li><code>OptionalInt min()</code>、<code>OptionalLong min()</code>、<code>OptionalDouble min()</code>：求最大值</li><li><code>int sum()</code>、<code>long sum()</code>、<code>double sum()</code>：求和，默认返回 0</li></ul><h3 id="构建流" tabindex="-1"><a class="header-anchor" href="#构建流"><span>构建流</span></a></h3><ul><li>从集合创建 <ul><li>使用 Collection 接口中的抽象方法 <code>Stream&lt;E&gt; stream()</code>创建一个流</li></ul></li><li>由值创建流 <ul><li>使用 Stream 类中静态方法 <code>Stream.of(T… values)</code> 通过显式值创建一个流</li><li>使用 Stream 类中静态方法<code>Stream.empty()</code>，创建一个空流</li></ul></li><li>由数组创建流 <ul><li>使用 Arrays 类中静态方法 <code>Arrays.stream(T[] array)</code> 从数组创建一个流</li></ul></li><li>由文件生成流 <ul><li>使用 Files 类中静态方法<code>Files.lines(Path path, Charset cs)</code>，返回一个由指定文件中的<strong>各行</strong>构成的字符串流</li></ul></li><li>由函数生成流：创建无限流 <ul><li>迭代：使用 Stream 类中静态方法 <code>Stream.iterate(T seed, UnaryOperator&lt;T&gt; f)</code>，依次对每个新生成的值应用函数 f，流的第一个元素是初始值 seed</li><li>生成：使用 Stream 类中静态方法 <code>Stream.generate(Supplier&lt;T&gt; s)</code>：流的每个元素由 s 提供</li></ul></li></ul><h3 id="并行流" tabindex="-1"><a class="header-anchor" href="#并行流"><span>并行流</span></a></h3><ul><li><code>parallelStream()</code></li><li><code>parallel()</code>：把顺序流转成并行流</li><li><code>sequential()</code>：把并行流转成顺序流</li><li>并行流背后使用的基础架构是 Java 7 中引入的 Fork/Join 分支/合并框架（以递归方式将可以并行的任务拆分成更小的任务，在不同的线程上执行，然后将每个子任务的结果合并起来生成整体结果）</li><li>默认的线程池是 ForkJoinPool，默认的线程数量是处理器数量（<code>Runtime.getRuntime().availableProcessors()</code>）</li></ul><h2 id="optional-t" tabindex="-1"><a class="header-anchor" href="#optional-t"><span><code>Optional&lt;T&gt;</code></span></a></h2><ul><li>Optional 类（java.util.Optional）是一个容器类，代表一个值存在或不存在</li><li>基础类型的 Optional 对象：OptionalInt、OptionalLong、OptionalDouble</li></ul><h3 id="静态方法-1" tabindex="-1"><a class="header-anchor" href="#静态方法-1"><span>静态方法</span></a></h3><ul><li><code>Optional&lt;T&gt; empty()</code>：返回一个空的 Optional 实例</li><li><code>Optional&lt;T&gt; of(T value)</code>：返回具有指定非空值的 Optional 实例，如果该值为 null，则抛出一个 NullPointerException 异常</li><li><code>Optional&lt;T&gt; ofNullable(T value)</code>：返回一个指定值的 Optional，如果值为 null，则返回一个空的 Optional</li></ul><h3 id="实例方法-1" tabindex="-1"><a class="header-anchor" href="#实例方法-1"><span>实例方法</span></a></h3><ul><li><code>boolean isPresent()</code>：在值存在时就返回 true，否则返回 false</li><li><code>void ifPresent(Consumer&lt;T&gt; block)</code>：在值存在的时候执行给定的代码块，否则什么也不做</li><li><code>Optional&lt;U&gt; map(Function&lt;T, U&gt; mapper)</code>：如果值存在，就对该值执行提供的 mapping 函数调用，否则返回一个空的 Optional 对象</li><li><code>Optional&lt;U&gt; flatMap(Function&lt;T, Optional&lt;U&gt;&gt; mapper)</code>：如果值存在，就对该值执行提供的 mapping 函数调用，返回一个 Optional 类型的值，否则就返回一个空的 Optional 对象（将两层的 Optional 对象转换为单一 Optional 对象）</li><li><code>Optional&lt;T&gt; filter(Predicate&lt;T&gt; predicate)</code>：如果值存在并且满足提供的谓词，就返回<strong>包含该值</strong>的 Optional 对象；否则返回一个空的 Optional 对象</li><li><code>T get()</code>：在值存在时返回值，否则抛出一个 NoSuchElementException 异常</li><li><code>T orElse(T other)</code>：返回值（如果存在），否则返回 other</li><li><code>T orElseGet(Supplier&lt;T&gt; other)</code>：返回值（如果存在），否则调用 other 并返回该调用的结果</li><li><code>T orElseThrow(Supplier&lt;X&gt; exceptionSupplier)</code>：返回包含的值（如果存在），否则抛出由 exceptionSupplier 创建的异常</li></ul><h2 id="新的日期和时间-api" tabindex="-1"><a class="header-anchor" href="#新的日期和时间-api"><span>新的日期和时间 API</span></a></h2><ul><li>java.time 包中，日期-时间对象是不可变的</li><li>Temporal 的实现类：Instant（代表一个具体的时刻）、LocalDate（代表不带时区的日期）、LocalTime（代表不带时区的时间）、LocalDateTime（代表不带时区的日期、时间）、Year（代表年）、YearMonth（代表年月）、ZonedDateTime（代表带相对于指定时区的日期、时间）</li><li>TemporalAmount 的实现类：Duration（代表以秒和纳秒衡量的时长）、Period（代表以年、月、日衡量的时长）</li><li>ZoneId（代表一个时区）、ZoneOffset（ZoneId 的子类，代表与 UTC/格林尼治时间的绝对偏差）</li><li>Clock（用于获取指定时区的当前日期、时间）</li><li>DayOfWeek（星期枚举类）、Month（月份枚举类）</li><li>ChronoUnit（时间单位枚举类）：YEARS、MONTHS、WEEKS、DAYS、HOURS、MINUTES、SECONDS、NANOS 等</li><li>格式器类：DateTimeFormatter，其所有实例都是线程安全的</li><li>根据模式字符串来创建 DateTimeFormatter 格式器，类方法：<code>DateTimeFormatter ofPattern(String pattern)</code></li><li>使用 DateTimeFormatter 格式化为字符串 <ul><li>调用 DateTimeFormatter 对象的 <code>format(TemporalAccessor temporal)</code> 将日期、时间（LocalDate、LocalDateTime、LocalTime 等实例）格式化为字符串</li><li>调用 LocalDate、LocalDateTime、LocalTime 等日期、时间对象的 <code>format(DateTimeFormatter formatter)</code> 方法执行格式化</li></ul></li><li>使用 DateTimeFormatter 解析字符串通过日期、时间对象提供的 <code>parse(CharSequence text)</code>或<code>parse(CharSequence text, DateTimeFormatter formatter)</code> 方法解析日期、时间字符串（默认的格式是 DateTimeFormatter.ISO_LOCAL_DATE_TIME、DateTimeFormatter.ISO_LOCAL_DATE、DateTimeFormatter.ISO_LOCAL_TIME，如 &quot;2011-12-03T10:15:30.1234&quot;，&quot;T&quot; 不区分大小写，秒和纳秒可选）</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取当前日期</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDate</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> today</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LocalDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">today</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lengthOfMonth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // today.get(ChronoField.DAY_OF_MONTH);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 判断是否时闰年</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">today</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">isLeapYear</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取当前时间</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LocalDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 设置时间</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LocalDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">of</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2018</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 23</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 59</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 59</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取年、月、日、时、分、秒</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getYear</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // dateTime.get(ChronoField.YEAR);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getMonth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getValue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // dateTime.get(ChronoField.MONTH_OF_YEAR);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getDayOfMonth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // dateTime.get(ChronoField.DAY_OF_MONTH);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getHour</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getMinute</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getSecond</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 调整日期/时间，返回修改了属性的新对象</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">withDayOfMonth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">25</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // dateTime.with(ChronoField.DAY_OF_MONTH, 25)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 当月的最后一天</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">with</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">TemporalAdjusters</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lastDayOfMonth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 比较先后</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">isAfter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">isBefore</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 加减时间</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">plusDays</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // dateTime.plus(1, ChronoUnit.DAYS);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minusDays</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 格式化</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">DateTimeFormatter</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> formatter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> DateTimeFormatter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ofPattern</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yyyy-MM-dd HH:mm:ss</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// LocalDateTime 转 String</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">formatter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // dateTime.format(formatter);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// String 转 LocalDateTime</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">LocalDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2018-10-01 23:59:59</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> formatter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// LocalDateTime 转 LocalDate、LocalTime</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDate</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> localDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toLocalDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> localTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toLocalTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// LocalDate、LocalTime 转 LocalDateTime</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> localDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> localDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atStartOfDay</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> localDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LocalDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">of</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">localDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> localTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取当前时间戳</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">long</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> millisecond</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Instant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toEpochMilli</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 转换当前时间的毫秒值</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">long</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> second</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Instant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getEpochSecond</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 获取当前时间的秒数</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Instant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ofEpochMilli</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">millisecond</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 毫秒值转 Instant</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 将此日期转换为从 1970-01-01 开始的天数</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toEpochDay</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 将此日期时间转换为从 1970-01-01T00：00：00Z 开始的秒数</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toInstant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ZoneOffset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">of</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+8</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toEpochMilli</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// LocalDateTime 转换为 ZonedDateTime，再转换为 Instant，再转换为 Date</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Date</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">from</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atZone</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ZoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemDefault</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toInstant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// Date 转换为 Instant，再转换为 LocalDateTime</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LocalDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ofInstant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toInstant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ZoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemDefault</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 获取相差时间间隔</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">amount </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">until</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">end</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ChronoUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DAYS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // end.toEpochDay() - start.toEpochDay()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">amount </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ChronoUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DAYS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">between</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> end</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 时间长度：Duration、Period</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Duration</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> d1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Duration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">between</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">time1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> time2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Duration</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> d1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Duration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">between</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dateTime1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> dateTime2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Duration</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> d2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Duration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">between</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">instant1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> instant2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Period</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> tenDays</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Period</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">between</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">date1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> date2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Period</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sixMonths</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Period</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ofMonths</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Duration</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sixSeconds</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Duration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ofSeconds</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">plus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sixMonths</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">plus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sixSeconds</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 时区 ID</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ZoneId</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ZoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemDefault</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ZoneId zoneId = TimeZone.getDefault().toZoneId();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ZoneId romeZone = ZoneId.of(&quot;Asia/Shanghai&quot;);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 时区 ID：Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getRules</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 时区规则：ZoneRules[currentStandardOffset=+08:00]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ZonedDateTime 有 LocalDateTime 几乎相同的方法，不同的是它可以设置时区</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ZoneId</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ZoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">of</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UTC+8</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ZonedDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> zonedDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ZonedDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">of</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2018</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 23</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 59</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 59</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1234</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 为时间点添加时区信息</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ZonedDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> zdt1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atStartOfDay</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 时间为 00:00:00</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ZonedDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> zdt2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atZone</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ZonedDateTime</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> zdt3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> instant</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atZone</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">zoneId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://sdky.gitee.io/img/%E8%A1%A8%E7%A4%BA%E6%97%B6%E9%97%B4%E7%82%B9%E7%9A%84%E6%97%A5%E6%9C%9F-%E6%97%B6%E9%97%B4%E7%B1%BB%E7%9A%84%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95.png" target="_blank" rel="noopener noreferrer"><img src="`+k+'" alt="表示时间点的日期-时间类的通用方法"></a> 图 4 表示时间点的日期-时间类的通用方法</p><p><a href="https://sdky.gitee.io/img/%E6%97%A5%E6%9C%9F-%E6%97%B6%E9%97%B4%E7%B1%BB%E4%B8%AD%E8%A1%A8%E7%A4%BA%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%94%E7%9A%84%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95.png" target="_blank" rel="noopener noreferrer"><img src="'+p+'" alt="日期-时间类中表示时间间隔的通用方法"></a> 图 5 日期-时间类中表示时间间隔的通用方法</p><ul><li><p>TemporalAdjusters 工厂类中返回 TemporalAdjuster（调整器）实例的静态方法</p><ul><li><code>firstDayOfMonth()</code>：当月的第一天</li><li><code>lastDayOfMonth()</code>：当月的最后一天</li><li><code>firstDayOfNextMonth()</code>：下月的第一天</li><li><code>lastInMonth(DayOfWeek dayOfWeek)</code>：下月的最后一天</li><li><code>firstDayOfNextYear()</code>：明年的第一天</li><li><code>firstDayOfYear()</code>：当年的第一天</li><li><code>lastDayOfYear()</code>：今年的最后一天</li><li><code>dayOfWeekInMonth(int ordinal, DayOfWeek dayOfWeek)</code>：同一个月中，第几个符合星期几要求的值</li><li><code>firstInMonth(DayOfWeek dayOfWeek)</code>：同一个月中，第一个符合星期几要求的值</li><li><code>lastInMonth(DayOfWeek dayOfWeek)</code>：同一个月中，最后一个符合星期几要求的值</li><li><code>previous(DayOfWeek dayOfWeek)</code>：在当前日期之前第一个符合指定星期几要求的日期</li><li><code>next(DayOfWeek dayOfWeek)</code>：在当前日期之后第一个符合指定星期几要求的日期</li><li><code>previousOrSame(DayOfWeek dayOfWeek)</code>：在当前日期之后第一个符合指定星期几要求的日期，如果当前日期已经符合要求，直接返回该对象</li><li><code>nextOrSame(DayOfWeek dayOfWeek)</code>：在当前日期之后第一个符合指定星期几要求的日期，如果当前日期已经符合要求，直接返回该对象</li></ul><p><a href="https://sdky.gitee.io/img/DateTimeFormatter_Predefined_Formatters.png" target="_blank" rel="noopener noreferrer"><img src="'+d+'" alt="DateTimeFormatter_Predefined_Formatters"></a> 图 6 DateTimeFormatter_Predefined_Formatters</p></li></ul><h2 id="base64" tabindex="-1"><a class="header-anchor" href="#base64"><span>Base64</span></a></h2><ul><li>Base64 是一种用 64 个字符来表示任意二进制数据的方法</li><li>Base64 编码会把 3 字节的二进制数据编码为 4 字节的文本数据，，长度比原来增加 1/3</li><li>java.util.Base64 工具类提供的静态方法用于获取以下三种 Base64 编码方案的编解码器（Base64.Encoder、Base64.Decoder） <ul><li>Basic（RFC4648）：输出被映射到一组字符 <code>A-Za-z0-9+/</code>，编码不添加任何行标，输出的解码仅支持 <code>A-Za-z0-9+/</code></li><li>URL and Filename safe（RFC4648*URLSAFE）：输出映射到一组字符 <code>A-Za-z0-9+*</code>，输出是 URL 和文件</li><li>MIME（RFC2045）：输出映射到 MIME 友好格式，即输出每行不超过 76 个字符，并且使用 &#39;\\r&#39; 并跟随 &#39;\\n&#39; 作为分割，编码输出最后没有行分割</li></ul></li></ul><h3 id="内部类" tabindex="-1"><a class="header-anchor" href="#内部类"><span>内部类</span></a></h3><ul><li>Base64.Encoder，实例方法：<code>String encodeToString(byte[] src)</code>：使用 Base64 编码方案将指定的字节数组编码为字符串 <code>int encode(byte[] src, byte[] dst)</code>：使用 Base64 编码方案对来自指定字节数组的所有字节进行编码，将生成的字节写入给定的输出字节数组 <code>byte[] encode(byte[] src)</code>：使用 Base64 编码方案将指定字节数组中的所有字节编码为新分配的字节数组 <code>OutputStream wrap(OutputStream os)</code>：使用 Base64 编码方案包装用于编码字节数据的输出流</li><li>Base64.Decoder，实例方法<code>byte[] decode(String src)</code>：使用 Base64 编码方案将 Base64 编码的字符串解码为新分配的字节数组 <code>byte[] decode(byte[] src)</code>：使用 Base64 编码方案从输入字节数组中解码所有字节，将结果写入新分配的输出字节数组 <code>int decode(byte[] src, byte[] dst)</code>：使用 Base64 编码方案从输入字节数组中解码所有字节，将结果写入给定的输出字节数组 <code>InputStream wrap(InputStream is)</code>：返回一个输入流，用于解码 Base64 编码字节流</li></ul><h2 id="其它语言新特性" tabindex="-1"><a class="header-anchor" href="#其它语言新特性"><span>其它语言新特性</span></a></h2><h3 id="注解" tabindex="-1"><a class="header-anchor" href="#注解"><span>注解</span></a></h3><h4 id="重复注解" tabindex="-1"><a class="header-anchor" href="#重复注解"><span>重复注解</span></a></h4><ul><li>要求：将注解标记为 @Repeatable，提供一个注解的容器</li></ul><h4 id="类型注解" tabindex="-1"><a class="header-anchor" href="#类型注解"><span>类型注解</span></a></h4><ul><li>从 Java 8 开始，注解已经能应用于任何类型，包括 new 操作符、类型转换、instanceof 检查、泛型类型参数，以及 implements 和 throws 子句</li></ul><h2 id="通用目标类型推断" tabindex="-1"><a class="header-anchor" href="#通用目标类型推断"><span>通用目标类型推断</span></a></h2>',75)]))}const y=s(r,[["render",g],["__file","index.html.vue"]]),A=JSON.parse('{"path":"/notes/Java/dt40wstr/","title":"Java8新特性","lang":"zh-CN","frontmatter":{"title":"Java8新特性","createTime":"2024/08/26 15:23:12","permalink":"/notes/Java/dt40wstr/"},"headers":[],"readingTime":{"minutes":19.21,"words":5763},"git":{"updatedTime":1727067719000,"contributors":[{"name":"chgoh7","email":"3180349973@qq.com","commits":6,"avatar":"https://avatars.githubusercontent.com/chgoh7?v=4","url":"https://github.com/chgoh7"}]},"filePathRelative":"notes/Java/Java8/Java8新特性.md","bulletin":false}');export{y as comp,A as data};
