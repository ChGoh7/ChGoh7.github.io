<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.19" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" href="/images/logo.png"><title>Hadoop期末复习 | chgoh7的文档&blog</title><meta name="description" content=""><link rel="preload" href="/assets/style-YVpTrZTY.css" as="style"><link rel="stylesheet" href="/assets/style-YVpTrZTY.css"><link rel="modulepreload" href="/assets/app-C8n7yTDe.js"><link rel="modulepreload" href="/assets/index.html-D7oqV4bR.js"><link rel="prefetch" href="/assets/index.html-CTWCTwVm.js" as="script"><link rel="prefetch" href="/assets/index.html-BokVlqTX.js" as="script"><link rel="prefetch" href="/assets/index.html-_VJ9g4vJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DKA-R-kW.js" as="script"><link rel="prefetch" href="/assets/index.html-D8pS9tPY.js" as="script"><link rel="prefetch" href="/assets/index.html-6QLL0MJW.js" as="script"><link rel="prefetch" href="/assets/index.html-g3hax7pI.js" as="script"><link rel="prefetch" href="/assets/index.html-pJXXPJSR.js" as="script"><link rel="prefetch" href="/assets/index.html-Cm4UwNug.js" as="script"><link rel="prefetch" href="/assets/index.html-DvyInISQ.js" as="script"><link rel="prefetch" href="/assets/index.html-JES6zkr6.js" as="script"><link rel="prefetch" href="/assets/index.html-gzaJYCja.js" as="script"><link rel="prefetch" href="/assets/index.html-3uxnF3Lo.js" as="script"><link rel="prefetch" href="/assets/index.html-TNKvfiBb.js" as="script"><link rel="prefetch" href="/assets/index.html-CtslgK4u.js" as="script"><link rel="prefetch" href="/assets/index.html-BuaAOhLe.js" as="script"><link rel="prefetch" href="/assets/index.html-DFHUZL_E.js" as="script"><link rel="prefetch" href="/assets/index.html-C_VFdshc.js" as="script"><link rel="prefetch" href="/assets/index.html-BUZ7X_4g.js" as="script"><link rel="prefetch" href="/assets/index.html-6XLfyxtD.js" as="script"><link rel="prefetch" href="/assets/index.html-Bah5m0zO.js" as="script"><link rel="prefetch" href="/assets/index.html-CSfgKRA_.js" as="script"><link rel="prefetch" href="/assets/index.html-CMlZPz6V.js" as="script"><link rel="prefetch" href="/assets/index.html-DMocIMEh.js" as="script"><link rel="prefetch" href="/assets/index.html-BFvgpIYs.js" as="script"><link rel="prefetch" href="/assets/index.html-D4DC24z_.js" as="script"><link rel="prefetch" href="/assets/index.html-CP4hXI11.js" as="script"><link rel="prefetch" href="/assets/index.html-DAded5y1.js" as="script"><link rel="prefetch" href="/assets/index.html-C6ba5NJY.js" as="script"><link rel="prefetch" href="/assets/index.html-B7zpF1WN.js" as="script"><link rel="prefetch" href="/assets/index.html-B_6GaRJn.js" as="script"><link rel="prefetch" href="/assets/index.html-jjfBuHmo.js" as="script"><link rel="prefetch" href="/assets/index.html-DseoXFNl.js" as="script"><link rel="prefetch" href="/assets/index.html-Bb0Tdh3d.js" as="script"><link rel="prefetch" href="/assets/index.html-DXwu3SF1.js" as="script"><link rel="prefetch" href="/assets/index.html-DEMP0EOp.js" as="script"><link rel="prefetch" href="/assets/index.html-Bp14GLjl.js" as="script"><link rel="prefetch" href="/assets/index.html-CvMTuEto.js" as="script"><link rel="prefetch" href="/assets/index.html-Jth9Fdx-.js" as="script"><link rel="prefetch" href="/assets/index.html-DQwZeYRy.js" as="script"><link rel="prefetch" href="/assets/index.html-BsRzvMnP.js" as="script"><link rel="prefetch" href="/assets/index.html-DU0nriuK.js" as="script"><link rel="prefetch" href="/assets/index.html-Cn0Q4qWK.js" as="script"><link rel="prefetch" href="/assets/index.html-BkXJLoCY.js" as="script"><link rel="prefetch" href="/assets/index.html-Dxye8ahF.js" as="script"><link rel="prefetch" href="/assets/index.html-B-Eknuoy.js" as="script"><link rel="prefetch" href="/assets/index.html-BsHEWHx4.js" as="script"><link rel="prefetch" href="/assets/index.html-6lipCTgB.js" as="script"><link rel="prefetch" href="/assets/index.html-BInLOkUz.js" as="script"><link rel="prefetch" href="/assets/index.html-FGa2rc24.js" as="script"><link rel="prefetch" href="/assets/index.html-BQ8aczLM.js" as="script"><link rel="prefetch" href="/assets/index.html-CujEGIjm.js" as="script"><link rel="prefetch" href="/assets/index.html-CxX_lw6X.js" as="script"><link rel="prefetch" href="/assets/index.html-ByE8SsTz.js" as="script"><link rel="prefetch" href="/assets/index.html-ByYtGStC.js" as="script"><link rel="prefetch" href="/assets/index.html-CwPE5pZn.js" as="script"><link rel="prefetch" href="/assets/index.html-CwdrpD6w.js" as="script"><link rel="prefetch" href="/assets/index.html-C8KlTUzY.js" as="script"><link rel="prefetch" href="/assets/index.html-CGju1ZM9.js" as="script"><link rel="prefetch" href="/assets/index.html-BOKz17Gv.js" as="script"><link rel="prefetch" href="/assets/index.html-Dc2JPs0d.js" as="script"><link rel="prefetch" href="/assets/index.html-CzNW5v12.js" as="script"><link rel="prefetch" href="/assets/index.html-Ayvbpr6o.js" as="script"><link rel="prefetch" href="/assets/index.html-CRuebyum.js" as="script"><link rel="prefetch" href="/assets/index.html-CStlQoW0.js" as="script"><link rel="prefetch" href="/assets/index.html-hC2gn5pj.js" as="script"><link rel="prefetch" href="/assets/index.html-5wgJzeIO.js" as="script"><link rel="prefetch" href="/assets/index.html-CXBDrmLH.js" as="script"><link rel="prefetch" href="/assets/index.html-CQnN0ZYI.js" as="script"><link rel="prefetch" href="/assets/index.html-BQxer8tw.js" as="script"><link rel="prefetch" href="/assets/index.html-DazFw7JP.js" as="script"><link rel="prefetch" href="/assets/index.html-CqPgBWz1.js" as="script"><link rel="prefetch" href="/assets/index.html-hK0urO6g.js" as="script"><link rel="prefetch" href="/assets/index.html-Dd6HLKEM.js" as="script"><link rel="prefetch" href="/assets/index.html-CYznYRZe.js" as="script"><link rel="prefetch" href="/assets/index.html-aQ3J-xw1.js" as="script"><link rel="prefetch" href="/assets/index.html-D6VN-HR4.js" as="script"><link rel="prefetch" href="/assets/index.html-BhnGvKVX.js" as="script"><link rel="prefetch" href="/assets/index.html-B9ekegos.js" as="script"><link rel="prefetch" href="/assets/index.html-56aaSuWB.js" as="script"><link rel="prefetch" href="/assets/index.html-9mYKKo_u.js" as="script"><link rel="prefetch" href="/assets/index.html-DAaiB9Cr.js" as="script"><link rel="prefetch" href="/assets/index.html-C5aJyUPE.js" as="script"><link rel="prefetch" href="/assets/index.html-B8cZkSiO.js" as="script"><link rel="prefetch" href="/assets/index.html-Csw20gLC.js" as="script"><link rel="prefetch" href="/assets/index.html-BdEe8T3o.js" as="script"><link rel="prefetch" href="/assets/index.html-BevmaDRI.js" as="script"><link rel="prefetch" href="/assets/index.html-Byv0QzYl.js" as="script"><link rel="prefetch" href="/assets/index.html-BSTRio9p.js" as="script"><link rel="prefetch" href="/assets/index.html-tfryCpAf.js" as="script"><link rel="prefetch" href="/assets/index.html-Cn5qK4PB.js" as="script"><link rel="prefetch" href="/assets/index.html-BKtUi_tS.js" as="script"><link rel="prefetch" href="/assets/index.html-CxYaSFxa.js" as="script"><link rel="prefetch" href="/assets/index.html-D4UUf18y.js" as="script"><link rel="prefetch" href="/assets/index.html-DH2sDyfT.js" as="script"><link rel="prefetch" href="/assets/index.html-BBBfD6wR.js" as="script"><link rel="prefetch" href="/assets/index.html-SJBPsXVO.js" as="script"><link rel="prefetch" href="/assets/index.html-C0Y5aXQs.js" as="script"><link rel="prefetch" href="/assets/index.html-DkX4WESx.js" as="script"><link rel="prefetch" href="/assets/index.html-ysoC4a4H.js" as="script"><link rel="prefetch" href="/assets/index.html-4hZNRAOK.js" as="script"><link rel="prefetch" href="/assets/index.html-D6bf9Sdp.js" as="script"><link rel="prefetch" href="/assets/index.html-DBqm9KxN.js" as="script"><link rel="prefetch" href="/assets/index.html-DRjEGeE0.js" as="script"><link rel="prefetch" href="/assets/index.html-Xr-IRrxB.js" as="script"><link rel="prefetch" href="/assets/index.html-Cxi_4710.js" as="script"><link rel="prefetch" href="/assets/index.html-CwhJ4bI3.js" as="script"><link rel="prefetch" href="/assets/index.html-Bfprp02V.js" as="script"><link rel="prefetch" href="/assets/index.html-CSk1ru6h.js" as="script"><link rel="prefetch" href="/assets/index.html-Rb09RHS7.js" as="script"><link rel="prefetch" href="/assets/index.html-Du8dOSZn.js" as="script"><link rel="prefetch" href="/assets/index.html-0RNLXwK3.js" as="script"><link rel="prefetch" href="/assets/index.html-BAyM8oVA.js" as="script"><link rel="prefetch" href="/assets/index.html-DEC4xcsu.js" as="script"><link rel="prefetch" href="/assets/index.html-iczMZLUf.js" as="script"><link rel="prefetch" href="/assets/index.html-BACGmUIv.js" as="script"><link rel="prefetch" href="/assets/index.html-D7FuSTlg.js" as="script"><link rel="prefetch" href="/assets/index.html-0MBz0OXJ.js" as="script"><link rel="prefetch" href="/assets/index.html-D9osmgTK.js" as="script"><link rel="prefetch" href="/assets/index.html-C6cc3Cuk.js" as="script"><link rel="prefetch" href="/assets/index.html-ByoZ7oE_.js" as="script"><link rel="prefetch" href="/assets/index.html-DZ-Q1CKz.js" as="script"><link rel="prefetch" href="/assets/index.html-D9Csu6Rg.js" as="script"><link rel="prefetch" href="/assets/index.html-DBti-3qA.js" as="script"><link rel="prefetch" href="/assets/index.html-Cq5iBlHb.js" as="script"><link rel="prefetch" href="/assets/index.html-zTICsUPF.js" as="script"><link rel="prefetch" href="/assets/index.html-jf_o_f89.js" as="script"><link rel="prefetch" href="/assets/index.html-DjG9Z1ee.js" as="script"><link rel="prefetch" href="/assets/index.html-D07IPAry.js" as="script"><link rel="prefetch" href="/assets/index.html-DRi7ssry.js" as="script"><link rel="prefetch" href="/assets/index.html-C9vBRN8T.js" as="script"><link rel="prefetch" href="/assets/index.html-BzNHENG_.js" as="script"><link rel="prefetch" href="/assets/index.html-IR1_zaZD.js" as="script"><link rel="prefetch" href="/assets/index.html-nXRRT-op.js" as="script"><link rel="prefetch" href="/assets/index.html-56BXgN2a.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn2x3Hzj.js" as="script"><link rel="prefetch" href="/assets/index.html-opTA4y_5.js" as="script"><link rel="prefetch" href="/assets/index.html-DmIyUmyt.js" as="script"><link rel="prefetch" href="/assets/index.html-Df7GoSux.js" as="script"><link rel="prefetch" href="/assets/index.html-9wzNHptP.js" as="script"><link rel="prefetch" href="/assets/index.html-CKMbOWGo.js" as="script"><link rel="prefetch" href="/assets/index.html-B4aAGgEQ.js" as="script"><link rel="prefetch" href="/assets/index.html-BY99sOHO.js" as="script"><link rel="prefetch" href="/assets/index.html-NMRQ5wLi.js" as="script"><link rel="prefetch" href="/assets/index.html-BiXA3cPU.js" as="script"><link rel="prefetch" href="/assets/index.html-DHj0xgSK.js" as="script"><link rel="prefetch" href="/assets/index.html-CEdEGkAH.js" as="script"><link rel="prefetch" href="/assets/index.html-DZg7x_pg.js" as="script"><link rel="prefetch" href="/assets/index.html-CgapNpif.js" as="script"><link rel="prefetch" href="/assets/index.html-BEFkEdyX.js" as="script"><link rel="prefetch" href="/assets/index.html-Y6Makfd6.js" as="script"><link rel="prefetch" href="/assets/index.html-c2e-V6Cj.js" as="script"><link rel="prefetch" href="/assets/index.html-scplGK6E.js" as="script"><link rel="prefetch" href="/assets/index.html-Cj2y6Q0E.js" as="script"><link rel="prefetch" href="/assets/index.html-CFK-9wHv.js" as="script"><link rel="prefetch" href="/assets/index.html-vQlnR3FA.js" as="script"><link rel="prefetch" href="/assets/index.html-DbhuxYt0.js" as="script"><link rel="prefetch" href="/assets/index.html-DgDoYQEJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DwkVBNkp.js" as="script"><link rel="prefetch" href="/assets/index.html-CKwvgdS6.js" as="script"><link rel="prefetch" href="/assets/index.html-B4tdDX0q.js" as="script"><link rel="prefetch" href="/assets/index.html-FLdqAjzF.js" as="script"><link rel="prefetch" href="/assets/index.html-DkBULObI.js" as="script"><link rel="prefetch" href="/assets/index.html-b-HlGPDd.js" as="script"><link rel="prefetch" href="/assets/index.html-XwvAF1oB.js" as="script"><link rel="prefetch" href="/assets/index.html-rbqYApW4.js" as="script"><link rel="prefetch" href="/assets/index.html-zLVXrlr3.js" as="script"><link rel="prefetch" href="/assets/index.html-CVh6J7W4.js" as="script"><link rel="prefetch" href="/assets/index.html-ETkKlr8r.js" as="script"><link rel="prefetch" href="/assets/index.html-CxC_sWqJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BR_WnqDw.js" as="script"><link rel="prefetch" href="/assets/index.html-BgjR6pci.js" as="script"><link rel="prefetch" href="/assets/index.html-BWGpdOSS.js" as="script"><link rel="prefetch" href="/assets/index.html-CoTCTR9h.js" as="script"><link rel="prefetch" href="/assets/index.html-B86BK7yr.js" as="script"><link rel="prefetch" href="/assets/index.html-BjZKjPnp.js" as="script"><link rel="prefetch" href="/assets/index.html-DaQtM3ps.js" as="script"><link rel="prefetch" href="/assets/index.html-S2VRMaFh.js" as="script"><link rel="prefetch" href="/assets/index.html-65eHAk7Z.js" as="script"><link rel="prefetch" href="/assets/index.html-CNLn9NYZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Lwrn7sQ4.js" as="script"><link rel="prefetch" href="/assets/index.html-7dsaakrF.js" as="script"><link rel="prefetch" href="/assets/index.html-DKMICrLO.js" as="script"><link rel="prefetch" href="/assets/index.html-QK_jbDiC.js" as="script"><link rel="prefetch" href="/assets/index.html-qjA4Z68P.js" as="script"><link rel="prefetch" href="/assets/index.html-C0u1DwNs.js" as="script"><link rel="prefetch" href="/assets/index.html-B8N2jmT3.js" as="script"><link rel="prefetch" href="/assets/index.html-CHk8B1qf.js" as="script"><link rel="prefetch" href="/assets/index.html-x7mdAIPb.js" as="script"><link rel="prefetch" href="/assets/index.html-CchTzV2O.js" as="script"><link rel="prefetch" href="/assets/index.html-BKXeERwJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DmDoABfQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Di6HQVZv.js" as="script"><link rel="prefetch" href="/assets/index.html-DlHSCvem.js" as="script"><link rel="prefetch" href="/assets/index.html-DP4mfRoO.js" as="script"><link rel="prefetch" href="/assets/index.html-BuEED7ug.js" as="script"><link rel="prefetch" href="/assets/index.html-BWxHcffo.js" as="script"><link rel="prefetch" href="/assets/index.html-CprSm_j1.js" as="script"><link rel="prefetch" href="/assets/index.html-DIyqhToa.js" as="script"><link rel="prefetch" href="/assets/index.html-BSk1WjAo.js" as="script"><link rel="prefetch" href="/assets/index.html-CRvA-WEy.js" as="script"><link rel="prefetch" href="/assets/index.html-D3Ppjm0L.js" as="script"><link rel="prefetch" href="/assets/index.html-AJNIUrDx.js" as="script"><link rel="prefetch" href="/assets/index.html-B4-i6yok.js" as="script"><link rel="prefetch" href="/assets/index.html-DoVIsdiT.js" as="script"><link rel="prefetch" href="/assets/index.html-hmXC7_Qb.js" as="script"><link rel="prefetch" href="/assets/index.html-DH3FJm5F.js" as="script"><link rel="prefetch" href="/assets/index.html-v7zfod4W.js" as="script"><link rel="prefetch" href="/assets/index.html-BX-ENN-l.js" as="script"><link rel="prefetch" href="/assets/404.html-Cjl07Iim.js" as="script"><link rel="prefetch" href="/assets/index.html-CHkfs9Ns.js" as="script"><link rel="prefetch" href="/assets/index.html-CpM_x5NS.js" as="script"><link rel="prefetch" href="/assets/index.html-D_DJ-2fS.js" as="script"><link rel="prefetch" href="/assets/index.html-7ANmdnf9.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-BlojTgRz.js" as="script"><link rel="prefetch" href="/assets/SearchBox-CXYo3zAy.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-BNDL057N.js" as="script"><link rel="prefetch" href="/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-Bv6W58pf.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-68cd6b44><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-68cd6b44 data-v-d34f28d6><div class="vp-navbar" vp-navbar data-v-d34f28d6 data-v-70d97d16><div class="wrapper" data-v-70d97d16><div class="container" data-v-70d97d16><div class="title" data-v-70d97d16><div class="vp-navbar-title" data-v-70d97d16 data-v-2c8d4622><a class="vp-link no-icon link title" href="/" data-v-2c8d4622 data-v-442a52aa><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/images/logo.png" alt data-v-7fbfbc9b><!--]--><!--[--><img class="vp-image light logo" src="/images/logo.png" alt data-v-7fbfbc9b><!--]--><!--]--><!--]--><span data-v-2c8d4622>chgoh7的文档&amp;blog</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-70d97d16><div class="content-body" data-v-70d97d16><!--[--><!--]--><div class="vp-navbar-search search" data-v-70d97d16><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-70d97d16 data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>博客</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>我的文档库</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-group" data-v-709dc2b1 data-v-c497e9e3><p class="title" data-v-c497e9e3><!----><span data-v-c497e9e3>后端</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/Java/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Java相关<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/Databases/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 数据库<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/Frameworks/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 常用框架<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 系统设计<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 分布式<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/高可用/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 高可用<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/%E9%AB%98%E6%80%A7%E8%83%BD/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 高性能<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/DevOps/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 开发|运营工具<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/ProjectGuide/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 项目开发指导<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="vp-menu-group" data-v-709dc2b1 data-v-c497e9e3><p class="title" data-v-c497e9e3><!----><span data-v-c497e9e3>前端</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/frontend/1qhyjizq/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 前端基础<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/frontend/x1kptznq/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 前端框架<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>互联网文档</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Webdocs/backend/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 后端<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Webdocs/frontend/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 前端<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Webdocs/web/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 互联网<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/BookStack/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>书栈</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/Memorandum/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>备忘录</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>探索</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Discovery/Solutions/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 解决方案<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Discovery/FAQ/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> FAQ<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Discovery/Playground/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 演练场<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Discovery/MyTools/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 实用工具<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="http://192.168.191.136:36558/" target="_blank" rel="noreferrer" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Control-1Panel<!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="http://192.168.191.136:5244/" target="_blank" rel="noreferrer" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Pan-ALL<!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="http://192.168.191.215:5244/" target="_blank" rel="noreferrer" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Pan-K50<!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="http://192.168.191.10:5244/" target="_blank" rel="noreferrer" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Pan-DESKTOP<!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Discovery/Opensource/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 开源项目<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/Discovery/Favorite/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> fav<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/Friends/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>友链</span><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-70d97d16 data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><!----><div class="vp-flyout vp-navbar-extra extra" data-v-70d97d16 data-v-652282fd data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-feafea4e><span class="vpi-more-horizontal icon" data-v-feafea4e></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-70d97d16 data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-70d97d16><div class="divider-line" data-v-70d97d16></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-68cd6b44 data-v-1dc3518c><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-1dc3518c><span class="vpi-align-left menu-icon" data-v-1dc3518c></span><span class="menu-text" data-v-1dc3518c>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-1dc3518c data-v-423a73ec><button data-v-423a73ec>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-68cd6b44 data-v-eb709286><div class="is-blog vp-doc-container" data-v-cce51d2d><!--[--><!--]--><div class="container" data-v-cce51d2d><!----><div class="content" data-v-cce51d2d><div class="content-container" data-v-cce51d2d><!--[--><!--]--><main class="main" data-v-cce51d2d><nav class="vp-breadcrumb" data-v-cce51d2d data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="首页" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="博客" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/blog/categories/?id=233681" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->DOING<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="DOING" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb current" href="/article/1drkikqo/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->Hadoop期末复习<!--]--><!----></a><!----><meta property="name" content="Hadoop期末复习" data-v-1ae4ad7a><meta property="position" content="4" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-581be9b0>Hadoop期末复习 <!----></h1><div class="vp-doc-meta" data-v-581be9b0><p class="reading-time" data-v-581be9b0><span class="vpi-books icon" data-v-581be9b0></span><span data-v-581be9b0>5752 字</span><span data-v-581be9b0>约 19 分钟</span></p><!----><p class="create-time" data-v-581be9b0><span class="vpi-clock icon" data-v-581be9b0></span><span data-v-581be9b0>2024-12-27</span></p></div><!--]--><div class="_article_1drkikqo_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-cce51d2d><div data-v-cce51d2d><h2 id="大数据导论" tabindex="-1"><a class="header-anchor" href="#大数据导论"><span>大数据导论</span></a></h2><ol><li>4V ：大量(Volume) 高速(Velocity) 多样(Variety) 低价值密度(Value)</li></ol><ul><li><p><strong>Volume（大量）</strong> 截至目前，人类生产的所有印刷材料的数据量是200PB，而历史上全人类总共说过的话的数 据量大约是5EB。当前，典型个人计算机硬盘的容量为TB量级，而一些大企业的数据量已经接近EB量级。</p></li><li><p><strong>Velocity（高速）</strong> 这是大数据区分于传统数据挖掘的最显著特征。根据IDC的“数字宇宙”的报告，预计到2025 年，全球数据使用量将达到163ZB。在如此海量的数据面前，处理数据的效率就是企业的生命。</p></li><li><p><strong>Variety（多样）</strong> 这种类型的多样性也让数据被分为结构化数据和非结构化数据。相对于以往便于存储的以数 据库/文本为主的结构化数据， 非结构化数据越来越多，包括网络日志、音频、视频、图片、地理位置信息等，这 些多类型的数据对数据的处理能力提出了更高要求。</p></li><li><p><strong>Value（低价值密度）</strong> 价值密度的高低与数据总量的大小成反比。比如，在一天监控视频中，我们只关心指定 课堂的45分钟，如何快速对有价值数据“提纯”成为目前大数据背景下待解决的难题。</p></li></ul><p>2.应用场景</p><p>电商网站：浏览过的商品，同类别推荐。</p><p>抖音：推荐你喜欢的视频。</p><p>零售： 分析用户消费习惯， 为用户购买商品提供方便， 从而提升商品销量。</p><p>经典案例：纸尿布+啤酒 https://zhuanlan.zhihu.com/p/111319675 （有兴趣可读）</p><p>物流仓储：京东物流， 上午下单下午送达、 下午下单次日上午送达</p><p>保险：海量数据挖掘及风险预测， 助力保险行业精准营销， 提升精细化定价能力。</p><p>金融：多维度体现用户特征，帮助金融机构推荐优质客户，防范欺诈风险。</p><p>房产：大数据全面助力房地产行业， 打造精准投策与营销， 选出更合适的地， 建造更合适的楼，卖给更合适 的人。</p><p>人工智能 + 5G + 物联网 + 虚拟与现实</p><p>传媒、文娱、舆情监控等</p><p>3.流程</p><p><img src="/assets/image-20241227182114910-Blp3-jo7.png" alt="image-20241227182114910"></p><h2 id="hadoop" tabindex="-1"><a class="header-anchor" href="#hadoop"><span>Hadoop</span></a></h2><blockquote><p>Hadoop是一个由Apache基金会所开发的分布式系统基础架构。 主要解决， 海量数据的存储和海量数据的分析计算问题</p></blockquote><ol><li><p>创始人是Doug Cutting</p></li><li><p>（必考）来源：Google三论文 Gfs MapReduce BigTable-HBASE</p></li></ol><p>GFS --&gt; HDFS</p><p>MapReduce --&gt; MR</p><p>BigTable --&gt; HBase</p><ol start="3"><li>（必考）版本 1.X 2.X 3.X</li></ol><img src="/assets/image-20241227183119795-BWxp03BW.png" alt="image-20241227183119795" style="zoom:50%;"><p>在 Hadoop1.x 时 代 ，Hadoop中的MapReduce同时处理业务逻辑运算和资源的调度， 耦合性较大。</p><p>在Hadoop2.x时代， 增加了Yarn。 Yarn只负责资 源 的 调 度 ，MapReduce 只负责运算。</p><p>Hadoop3.x备课在组成上没有变化。 3版本和2版本在某些方面有差异，后续课程提到。</p><ol start="4"><li><p>运行模式：本地、完全分布式\伪分布式</p><p>本地模式：单机运行，只是用来演示一下官方案例。生产环境不用。</p><p>伪分布式模式：也是单机运行，但是具备Hadoop集群的所有功能，一台服务器模拟一个分布式的环境。个别缺钱的 公司用来测试，生产环境不用</p><p>完全分布式模式：多台服务器组成分布式环境。生产环境使用。</p></li><li><p>历史服务器</p><p>查看程序的历史运行情况，具体配置步骤:</p><ol><li><p>配置 mapred-site.xml</p><p><code>[whuc@hadoop102 hadoop-3.1.3]$ cd etc/hadoop/ [whuc@hadoop102 hadoop]$ vim mapred-site.xml 添加如下到configuration标记对中</code></p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- 历史服务器端地址 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mapreduce.jobhistory.address</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hadoop102:10020</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- 历史服务器 web 端地址 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mapreduce.jobhistory.webapp.address</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hadoop102:19888</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>分发配置文件到103、104</p><p><code>[whuc@hadoop102 hadoop]$ xsync mapred-site.xml</code></p></li><li><p>在103停掉yarn服务，重启</p><p><code>[whuc@hadoop102 hadoop]$ ssh hadoop103 jps 6304 NodeManager 5717 DataNode 7917 Jps 6175 ResourceManager ## 有ResourceManager ，表示yarn是启动的</code></p><p><code>[whuc@hadoop102 hadoop]$ ssh hadoop103 Last login: Sat Jul 24 15:24:04 2021 from hadoop102</code></p><p>（1）切换目录</p><p><code>[whuc@hadoop103 ~]$ cd /opt/module/hadoop-3.1.3/sbin/</code></p><p>（2）先停掉yarn</p><p><code>[whuc@hadoop103 sbin]$ ./stop-yarn.sh</code></p><p>（3）再启动</p><p><code>[whuc@hadoop103 sbin]$ ./start-yarn.sh Starting resourcemanager Starting nodemanagers</code></p><p>（4）查看 103上有ResourceManager和NodeManager ok</p><p><code>[whuc@hadoop103 sbin]$ jps 8370 ResourceManager 8500 NodeManager 5717 DataNode 8862 Jps</code></p><p>（5）查看102 和104节点</p><p><code>[whuc@hadoop103 sbin]$ exit 登出 Connection to hadoop103 closed. [whuc@hadoop102 hadoop]$ jps 6321 DataNode 6167 NameNode 8767 NodeManager 8895 Jps [whuc@hadoop102 hadoop]$ ssh hadoop104 jps 5238 DataNode 7160 NodeManager 5353 SecondaryNameNode 7307 Jps</code></p></li><li><p>在102启动历史服务器</p><p>手动启动</p><p><code>[whuc@hadoop102 hadoop]$ mapred --daemon start historyserve</code></p><p>查看jps，出现JobHistoryServer，ok</p><p><code>[whuc@hadoop102 hadoop]$ jps 6321 DataNode 8961 JobHistoryServer 9029 Jps 6167 NameNode 8767 NodeManager</code></p></li><li><p>查看web端，http://hadoop102:19888/jobhistory</p></li></ol></li><li><p>时间同步服务器</p></li></ol><p>时间同步问题</p><ul><li>如果服务器在公网环境（能连接外网），可以不采用集群时间同步，因为服务器会定期和公网时间进行校 准；</li><li>如果服务器在内网环境，必须要配置集群时间同步，否则时间久了，会产生时间偏差，导致集群执行任务时 间不同步。</li></ul><p>需求；找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步， 生产环境根据任务对时间的准 确程度要求周期同步。 测试环境为了尽快看到效果，采用 1 分钟同步一次。</p><img src="/assets/image-20241227184908521-CnFclQKQ.png" alt="image-20241227184908521" style="zoom:50%;"><p>时间服务器配置、102（必须 root 用户）</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# yum </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">install</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">y</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntp</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl start ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">status</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 修改配置文件</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">vim</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">etc</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/ntp.conf</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 修改（授权 </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">192.168.10.0-192.168.10.255</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 网段上的所有机器可以从这台机器上查询和同步时间）</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">18</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> restrict </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">192.168.3.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> mask </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">255.255.255.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> nomodify notrap</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 注释（集群在局域网中，不使用其他互联网上的时间）</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">22</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> #</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">centos.pool.ntp.org iburst</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">23</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> #</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">centos.pool.ntp.org iburst</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">24</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> #</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">centos.pool.ntp.org iburst</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> #</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">centos.pool.ntp.org iburst</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 添加（当该节点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中的其他节点提供时间同步）</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">61</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.127.1.0</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">62</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> fudge </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">127.127.1.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> stratum </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 保存退出</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 会影响ntp开机自启，关闭</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl disable chronyd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl enable ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl restart ntpd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他机器配置（必须 root 用户）</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 关闭103和104的ntp，以及开机不自启</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 如果没有ntp服务，此步骤可跳过</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# ssh hadoop103</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Last login: Sat Jul </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">24</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">13</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2021</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> from hadoop103</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop103 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl stop ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop103 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">status</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">● ntpd.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">service</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Network</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Service</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Loaded: </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">loaded</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">usr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">systemd</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">system</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/ntpd.service; disabled; vendor preset: </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">disabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Active: </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">inactive</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dead</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop103 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">is</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">enabled</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">disabled</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# ssh hadoop104</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Last login: Sat Jul </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">24</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">49</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">40</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2021</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> from hadoop102</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl stop ntpd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">status</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">● ntpd.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">service</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Network</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Service</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Loaded: </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">loaded</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">usr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">systemd</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">system</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/ntpd.service; disabled; vendor preset: </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">disabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Active: </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">inactive</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dead</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# systemctl </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">is</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">enabled</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntpd</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">disabled</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若是最小安装系统，无需安装ntp，需要安装的是ntpdate，用于计划任务中与102保持时间同步。</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop103 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# yum list | grep ntpdate</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ntpdate.x86_64 </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4.2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.6p5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">-29.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">el7.centos</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">.2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> base</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop103 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# yum </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">install</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">y</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ntpdate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>计划任务，同步时间</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop103 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">crontab</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">usr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sbin</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ntpdate</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop102</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">crontab</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">usr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sbin</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ntpdate</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop102</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 保存提出</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## 修改104时间 ，1分钟 看同步情况</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">date</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">s</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2021-9-11 11:11:11</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2021年 09月 11日 星期六 </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CST</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">您在 /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">var</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">spool</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">mail</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">root</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 中有邮件</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">date</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2021年 09月 11日 星期六 </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">26</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CST</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">date</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2021年 09月 11日 星期六 </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">47</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CST</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[root@hadoop104 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]# </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">date</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2021年 07月 24日 星期六 </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">07</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">24</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CST</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">## ok</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>start-dfs.sh（是启动HDFS的命令）</p><p>start-yarn.sh（是启动yarn的命令）</p><p>start-all.sh命令是 start-dfs.sh 与 start-yarn.sh 这两个命令的合并</p><h2 id="必考-hdfs-hadoop-distribute-file-system" tabindex="-1"><a class="header-anchor" href="#必考-hdfs-hadoop-distribute-file-system"><span>(必考)HDFS（Hadoop Distribute File System）</span></a></h2><p>1.组成部分：</p><p>HDFS采用主/从（Master/Slave）架构，一般一个HDFS集群由一个NameNode、一个Secondary NameNode和多个DataNode组成。</p><p>2.分别什么功能</p><p>NameNode（nn）Master</p><blockquote><p>NameNode是HDFS集群的主节点，是一个中心服务器，负责存储和管理文件系统的元数据（节点信息）</p></blockquote><p>（1） 管理HDFS的名称空间 （2） 配置副本策略 （3） 管理数据块（ Block） 映射信息 （4） 处理客户端读写请求</p><p>Secondary NameNode （2nn）</p><blockquote><p>Secondary NameNode辅助NameNode，分担其工作量，用于同步元数据信息</p></blockquote><p>（1）并非NameNode的热备。当NameNode挂掉的时候，并不能马上替换NameNode并提供服务 （2）辅助NameNode， 分担其工作量， 比如定期合并Fsimage和Edits， 并推送给NameNode （3）在紧急情况下， 可辅助恢复NameNode （4）nn的高可用通常使用其他集群框架</p><p>DataNode（dn）slave</p><blockquote><p>DataNode是HDFS集群的从节点，存储实际的数据，汇报存储信息给NameNode</p></blockquote><p>（1）接收nn指令 （2）存储实际数据块 （3）执行数据块读写操作</p><p>Client 客户端（命令行、浏览器等）</p><p>（1）文件切分。 文件上传HDFS的时候， Client将文件切分成一个一个的Block， 然后进行上传 （2）与NameNode交互， 获取文件的位置信息 （3）与DataNode交互， 读取或者写入数据 （4）Client提供一些命令来管理HDFS， 比如NameNode格式化 （5）Client可以通过一些命令来访问HDFS，比如对HDFS增删查改操作</p><p>3.优缺点是什么？</p><p>优点</p><p>（1） 高容错性</p><p>数据自动保存多个副本；副本丢失自动恢复</p><p>（2）适合处理大数据</p><p>数据规模支持GB\TB\PB</p><p>文件规模，可处理百万规模文件数量</p><p>（3）成本优势</p><p>以前处理大数据使用小型机，昂贵；现在硬件成本降低，门槛降低。</p><p>缺点</p><p>（1）不适合低延时数据访问</p><p>软件层面不支持</p><p>（2）处理大量小文件很低效</p><p>DataNode存数据块，NameNode存数据块的元数据；每个数据块的索引额定占用NomeNode150byte空间。小文件过多，索引检索慢。</p><p>（3）不支持并发写入、文件随机修改</p><p>数据只能同时一个写入；数据只能追加</p><p>4.副本机制</p><p>5.心跳机制</p><p>心跳是每 3 秒一次，心跳返回结果带有 NameNode 给该 DataNode 的命令如复制块数据到另一台机器，或删除某个数据块。 如果超过 10 分钟没有收到某个 DataNode 的心跳，则认为该节点不可用。</p><p><mark>6.块大小和什么有关(可能是简答) =&gt; 存储介质</mark> 重点</p><ul><li>HDFS中的文件在物理上是分块存储 （ Block） ， 块的大小可以通过配置参数( dfs.blocksize） 来规定， 默 认大小在Hadoop2.x/3.x版本中是128M， 1.x版本中是64M。 假设在nn寻址时间为10ms，找到数据的时间也就是10ms。 砖家说：寻址时间为传输时间的1%时，是最佳状态 计算得出，传输时间为10ms/1%=1000ms=1s 目前机械硬盘读写速率80-100m/s,固态硬盘读写速率200-300m/s 找一个块的时间10ms，读写一个块的时间1秒，最佳状态 所以，dfs.blocksize默认为128M，也有设置为256M的，其原因是存储使用固态硬盘。</li><li>思考：为什么块的大小不能设置太小， 也不能设置太大？</li></ul><p>​ （1）HDFS的块设置太小， 会增加寻址时间， 程序一直在找块的开始位置；</p><p>​ （2）如果块设置的太大， 从磁盘传输数据的时间会明显大于定位这个块开始位置所需的时间。 导致程序在处理这块数据时， 会非常慢。</p><ul><li>总结： HDFS块的大小设置主要取决于磁盘传输速率</li></ul><p>7.shell操作</p><p>基本用法：</p><ul><li>hadoop fs 具体命令</li><li>hdfs dfs 具体命令</li><li>两个是完全相同的。</li></ul><p>常用命令测试：</p><ul><li>启动，查看集群</li></ul><p>​ -help：查案子命令用法</p><ul><li>上传</li></ul><p>​ （1）-moveFromLocal：从本地剪切粘贴到 HDFS</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> vim w001.txt</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">moveFromLocal</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> w001.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2021-07-25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">09</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">23</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">442</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> INFO sasl.SaslDataTransferClient: SASL encryption trust check:</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">localHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> remoteHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ls</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">bin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ （2）-copyFromLocal：从本地剪切粘贴到 HDFS</p><p>​ （3）-put：等同于 copyFromLocal，生产环境更习惯用 put</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> echo </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">123456</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> w002.txt</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">put</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> w002.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">put: `/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&#39;: File exists</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">put</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> w002.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2021-07-25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">56</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">901</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> INFO sasl.SaslDataTransferClient: SASL encryption trust check:</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">localHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> remoteHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ （4）-appendToFile：追加一个文件到已经存在的文件末尾</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">appendToFile</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> w002.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2021-07-25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">22</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">55</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">718</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> INFO sasl.SaslDataTransferClient: SASL encryption trust check:</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">localHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> remoteHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>下载</li></ul><p>（1）-copyToLocal：从 HDFS 拷贝到本地</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">copyToLocal</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> w001.txt</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2021-07-25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">26</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">321</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> INFO sasl.SaslDataTransferClient: SASL encryption trust check:</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">localHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> remoteHostTrusted</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ls</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">bin w001.txt w002.txt</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> cat w001.txt</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">www.baidu.com</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">www.taobao.com</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：命令行最后的两个路径，一个是hdfs文件系统的路径，一个是Linux文件系统的路径</p><p>（2）-get：等同于 copyToLocal，生产环境更习惯用 ge</p><ul><li>HDFS直接操作</li></ul><p>（1）-ls</p><p>（2）-cat</p><p>（3）-chgrp、 -chmod、 -chown： Linux 文件系统中的用法一样，修改文件所属权限</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">chown</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> root</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ls</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rw</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">r</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">--</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">r</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">--</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> root supergroup </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2021-07-25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（4）-mkdir：创建路径</p><p>（5）-cp：从 HDFS 的一个路径拷贝到 HDFS 的另一个路径</p><p>（6）-mv：在 HDFS 目录中移动文件</p><p>（7）-tail：显示一个文件的末尾 1kb 的数据 （-head）</p><p>（8）-rm：删除文件或文件夹 （-r 参数 递归删除目录中的文件和子目录）</p><p>（9） -du 统计文件夹的大小信息</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">du</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">77</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 231</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">input</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">57</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 171</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">output</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">57</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 171</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">output00</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">36</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 108</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">607115</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1821345</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">tmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>77 231 /input：231 是三个副本的大小</p><p>（10）-setrep：设置 HDFS 中文件的副本数量</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">setrep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Replication </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> set</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[whuc@hadoop102 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hadoop </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">fs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">du</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">77</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 231</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">input</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">57</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 171</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">output</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">57</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 171</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">output00</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">36</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 108</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test00</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test01</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">607115</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1821345</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">tmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20241227191048277-BGeXwN6S.png" alt="image-20241227191048277"></p><p>这里设置的副本数只是记录在 NameNode 的元数据中，是否真的会有这么多副本，还得看 DataNode 的数 量。因为目前只有 3 台设备，最多也就 3 个副本，只有节点数的增加到 10台时， 副本数才能达到 10。</p><h2 id="mapreduce-编程题多" tabindex="-1"><a class="header-anchor" href="#mapreduce-编程题多"><span>MapReduce（编程题多）</span></a></h2><p>MapReduce是Hadoop的一个分布式计算框架，也是一种大规模数据集并行运算的编程模型，主要用于处理海量数据的运算。 MapReduce主要包括Map（映射）和Reduce（规约）两部分。</p><p>1.框架思路：先分后合，提高计算效率</p><p>2.序列化 writable</p><p>3两种计算模型 map 和 reduce</p><p>4.inputformat 切片机制 数据读取方式</p><p>5.mapper maptask 数量与什么有关</p><p>6.==(编程题会出30分，答题规范先思路再代码) == shuffle 环形缓冲区 100M 阈值80% 溢写磁盘（一个MT会有多个溢写文件，合并成一个中间结果） 分区partitioner 排序comparable 合并（三者有一个在写代码时可选）combiner 思路：分区</p><p>7.renducer reducetask 数量与什么有关</p><p>8.outputformat 输出 DBWritable --》 类似sqoop框架 封装opf</p><p>9.代码： 三个类 Mapper（继承，重写map，输入输出泛型） Reducer（继承，重写reduce，输入输出泛型） Driver（7-8步骤）</p><h2 id="yarn" tabindex="-1"><a class="header-anchor" href="#yarn"><span>Yarn</span></a></h2><p>1.mesos 是什么</p><p>Mesos是一个开源的资源管理系统，可以对集群中的资源做弹性管理。Mesos可以在各个框架间进行粗粒度的资源分配，每个框架根据自身任务的特点进行细粒度的任务调度。</p><ol start="2"><li><code>2.X版本 </code>才引入</li></ol><p>3.（必考，选择题可能 各自功能要清晰）组成部分 ResourceManager、NodeManager、applicationMaster、container(cpu 网络 硬盘 等资源的抽象)</p><p><img src="/assets/image-20241228005136580-BkTkDvv2.png" alt="image-20241228005136580"></p><ol start="4"><li>（必考）调度器：</li></ol><p>Hadoop 作业调度器主要有三种： <code>FIFO</code>、 <code>容量（Capacity Scheduler）</code> 和<code>公平（FairScheduler）</code>。</p><p>Apache Hadoop3.1.3 默认的资源调度器是 <code>Capacity Scheduler</code>。</p><p>CDH 框架默认调度器是 <code>Fair Scheduler</code>。</p><p>单队列：FIFO</p><p>多队列：公平调度器（收费版）、容量调度器（免费版）</p><ul><li>先进先出调度器（FIFO）</li></ul><p>FIFO 调度器（First In First Out） ：单队列，根据提交作业的先后顺序，先来先服务。</p><p><img src="/assets/image-20241228005818631-DRb_jVzN.png" alt="image-20241228005818631"></p><p>优点：简单易懂； 缺点：不支持多队列，生产环境很少使用；</p><ul><li>容量调度器（Capacity Scheduler）</li></ul><p>Capacity Scheduler 是 Yahoo 开发的多用户调度器。</p><p><img src="/assets/image-20241228010303490-BT-r9eg4.png" alt="image-20241228010303490"></p><ul><li>公平调度器（Fair Scheduler）</li></ul><p>Fair Schedulere 是 Facebook 开发的多用户调度器。</p><p><img src="/assets/image-20241228010948008-NKDrE4YR.png" alt="image-20241228010948008"></p><p>公平调度器设计目标是：在时间尺度上，所有作业获得公平的资源。某一时刻一个作业应获资源和实际获取 资源的差距叫“缺额” 调度器会优先为缺额大的作业分配资源。</p><ol start="5"><li>管理命令</li></ol><p><strong>查看</strong></p><ul><li><p>列出所有 Application：：<code>yarn application -list</code></p></li><li><p>根据 Application 状态过滤： <code>yarn application -list -appStates &lt;States&gt;</code></p></li></ul><p>例如：<code>yarn application -list -appStates FINISHED </code>（查看FINISHED状态的应用）</p><ul><li>Kill 掉 Application：<code>yarn application -kill &lt;application编号&gt;</code></li></ul><p><strong>yarn logs查看日志</strong></p><ul><li><p>查询 Application 日志：<code> yarn logs -applicationId &lt;application的id&gt;</code></p></li><li><p>查询 Container 日志：<code>yarn logs -applicationId -containerId</code></p></li></ul><p><strong>yarn applicationattempt查看尝试运行的任务</strong></p><ul><li><p>列出所有 Application 尝试的列表： <code> yarn applicationattempt -list &lt;application的id&gt;</code></p></li><li><p>打印 ApplicationAttemp 状态：<code> yarn applicationattempt -status &lt;appattempt的id&gt;</code></p></li></ul><p><strong>yarn container 查看容器</strong></p><ul><li><p>列出所有 Container：<code>yarn container -list &lt;appattempt的id&gt;</code></p></li><li><p>打印 Container 状态：<code> yarn container -status</code></p></li></ul><p><strong>yarn node 查看节点状态</strong>：<code>yarn node -list -all</code></p><p><strong>yarn queue 查看队列</strong>：<code> yarn queue -status default</code></p><p>启动停止：</p><p>start-yarn.sh</p><p>stop-yarn.sh</p><h2 id="zookeeper" tabindex="-1"><a class="header-anchor" href="#zookeeper"><span>zookeeper</span></a></h2><p>1.<!----></p><p>Zookeeper 是一个开源的分布式的，为分布式框架提供协调服务的 Apache 项目。是一个基于观察者模式设计的分布式服务管理框架，</p><ol start="2"><li>文件系统+通知系统</li></ol><p>基于观察者模式，它负责存储和管理大家都关心的数据， 然后接受观察者的注册， 一旦这些数据的状态发生变化， Zookeeper就将负责通知已经在Zookeeper上注册的那些观察者做出相应的反应</p><ol start="3"><li>选举机制</li></ol><p><img src="/assets/image-20241228013136562-B6ztrDHy.png" alt="image-20241228013136562"></p><p><img src="/assets/image-20241228013119791-Dm1GPERR.png" alt="image-20241228013119791"></p><p>4.leader（管理节点） follower（工作节点）</p><p><img src="/assets/image-20241228013616878-Ca_bfNOK.png" alt="image-20241228013616878"></p><h2 id="flume" tabindex="-1"><a class="header-anchor" href="#flume"><span>flume</span></a></h2><p>基础架构</p><img src="/assets/image-20241228014613010-Dvg_xVAi.png" alt="image-20241228014613010" style="zoom:50%;"><blockquote><p>Flume 是 Cloudera 提供的一个高可用的，高可靠的，分布式的<!---->。 Flume 基于流式架构，灵活简单。</p></blockquote><ol><li>(必考)组成：source、sink、channel</li></ol><ul><li><p>Agent 是一个 JVM 进程，它以事件的形式将数据从源头送至目的。Agent 主要有 3 个部分组成， Source、 Channel、 Sink。</p></li><li><p>Source 是负责接收数据到 Flume Agent 的组件。 Source 组件可以处理各种类型、各种格式的日志数 据，包括 avro、 thrift、 exec、 jms、 spooling directory、 netcat、 sequencegenerator、 syslog、 http、 legacy</p></li><li><p>Sink 不断地轮询 Channel 中的事件且批量地移除它们，并将这些事件批量写入到存储或索引系统、或者被 发送到另一个 Flume Agent。Sink 组件目的地包括 hdfs、 logger、 avro、 thrift、 ipc、 file、 HBase、 solr、自定义 。</p></li><li><p>Channel 是位于 Source 和 Sink 之间的缓冲区。因此， Channel 允许 Source 和 Sink 运作在不同的 速率上。 Channel 是线程安全的，可以同时处理几个 Source 的写入操作和几个Sink 的读取操作。 Flume 自带 两种 Channel： Memory Channel 和 File Channel 以及 Kafka Channel。 Memory Channel 是内存中的队 列。 Memory Channel 在不需要关心数据丢失的情景下适用。如果需要关心数据丢失，那么 Memory Channel 就不应该使用，因为程序死亡、机器宕机或者重启都会导致数据丢失。File Channel 将所有事件写到磁盘。因 此在程序关闭或机器宕机的情况下不会丢失数据。</p></li><li><p>Event 传输单元， Flume 数据传输的基本单元，以 Event 的形式将数据从源头送至目的地。Event 由 Header 和 Body 两部分组成， Header 用来存放该 event 的一些属性，为 K-V 结构，Body 用来存放该条数据，形式为 字节数组。</p></li></ul><img src="/assets/image-20241228014907677-D6xQbziW.png" alt="image-20241228014907677" style="zoom:50%;"><ol start="2"><li>数据传输形式 event header（k-v）+body（byte array） （见上）</li></ol><h2 id="sqoop" tabindex="-1"><a class="header-anchor" href="#sqoop"><span>sqoop</span></a></h2><blockquote><p>是一款开源的工具，主要用于在Hadoop(Hive)与传统的数据库(mysql、postgresql...)间进行数据的传递，可以将一个关系型数据库（例如 ： MySQL ,Oracle ,Postgres等）中的数据导进到Hadoop的HDFS中，也可以将HDFS的数据导进到关系型数据库中。</p></blockquote><ol><li>封装了outputformat</li></ol><p>原理是将导入或导出命令翻译成mapreduce程序来实现。</p><p>在翻译出的mapreduce中主要是对inputformat和outputformat进行定制。</p><ol start="2"><li>导入导出数据</li></ol><p><strong>导入操作</strong></p><p>使用Sqoop将数据导入到MySQL中。请使用以下命令：</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sqoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --connect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jdbc:mysql://localhost:3306/hive_data</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--username </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your_username</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --password</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your_password</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--table </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">users</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--hive-import </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--hive-table </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">users</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--as-textfile </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--target-dir </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/user/hive/warehouse/users</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--num-mappers </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是命令中各个参数的说明：</p><ul><li><code>--connect jdbc:mysql://localhost:3306/hive_data</code>：指定MySQL的JDBC连接URL。</li><li><code>--username your_username --password your_password</code>：提供连接数据库所需的用户名和密码。</li><li><code>--table users</code>：指明要从Hive中导出哪个表。</li><li><code>--hive-import</code>：指示Sqoop从Hive中导入数据。</li><li><code>--hive-table users</code>：指定Hive中数据表的名字。</li><li><code>--as-textfile</code>：导出数据为文本文件格式，您也可以选择其他格式。</li><li><code>--target-dir /user/hive/warehouse/users</code>：指定存放导出的数据的目标目录。</li><li><code>--num-mappers 1</code>：设置并发任务的数量。</li></ul><p>案例：</p><p>create database sqoop;</p><p>use sqoop</p><p>source /home/whuc/whmc.sql</p><p>创建好emp表</p><p>通过sqoop查看MySQL中sqoop库中的表：</p><p><code>bin/sqoop list-tables --connect jdbc:mysql://localhost:3306/sqoop --username root --password 111111 emp</code></p><p>将emp表的数据导入到HDFS指定目录下：</p><p><code>bin/sqoop import --connect jdbc:mysql://localhost:3306/sqoop --username root --password 111111 --delete-target-dir --table emp --target-dir /sqoop/emp --m 1</code></p><p>查看导出结果：</p><p><code>hadoop fs -cat /sqoop/emp/part-m-00000</code></p><p><strong>导出操作</strong></p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sqoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> export</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    --connect</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">jdbc:mysql://localhost:3306/your_database</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> JDBC</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 连接字符串</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    --username</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your_username</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 数据库用户名</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    --password</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your_password</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 数据库密码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    --table</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your_table_name</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 要导入的目标表</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    --export-dir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /path/to/hdfs/data</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HDFS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 上的数据路径</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    --input-fields-terminated-by</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 输入文件分隔符</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    --batch</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 批量导入</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>--connect</code>: 指定 MySQL 数据库的连接字符串。</li><li><code>--username</code>: 指定 MySQL 数据库用户名。</li><li><code>--password</code>: 指定 MySQL 数据库密码，该信息应保密。</li><li><code>--table</code>: 指定要导入数据的目标表名。</li><li><code>--export-dir</code>: 指定 HDFS 上的数据目录路径。</li><li><code>--input-fields-terminated-by</code>: 指定输入文件的字段分隔符，通常是逗号或制表符。</li><li><code>--batch</code>: 使 Sqoop 以批量方式插入数据，提高性能。</li></ul><p>在 MySQL 命令行或者工具中，运行如下 SQL 查询，确保数据已成功导入：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> your_table_name </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">LIMIT</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">; </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 查询目标表的前10条数据</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="azkaban" tabindex="-1"><a class="header-anchor" href="#azkaban"><span>azkaban</span></a></h2><blockquote><p>Azkaban是由Linkedin开源的一个批量工作流任务调度器</p></blockquote><p>任务流调度框架 描述任务之间的依赖关系 通过一个简单的key:value对的配置文件来定义任务之间的依赖关系。 在这个配置文件中，可以通过dependencies属性来设置一个或多个前置任务，从而建立任务之间的依赖关系。</p><p>详细查看<a href="https://www.cnblogs.com/liugp/p/16273966.html" target="_blank" rel="noopener noreferrer">Azkaban实战一节</a></p><h2 id="题型" tabindex="-1"><a class="header-anchor" href="#题型"><span>题型</span></a></h2><p>选择10 x2 填空10 x 2 简答 6 x 5 编程 15 x 2</p><p>​</p></div><!----><div class="vp-doc-changelog" data-v-cce51d2d data-v-ab079e77><h2 id="doc-changelog" tabindex="-1" class="vp-doc-header" data-v-ab079e77 data-v-309da98c><a href="#doc-changelog" class="header-anchor" data-v-309da98c><span data-v-309da98c><!--[-->变更历史<!--]--></span></a></h2><details class="hint-container details" data-v-ab079e77><summary class="changelog-header" data-v-ab079e77><span data-v-ab079e77><span class="vpi-changelog" data-v-ab079e77></span><span data-v-ab079e77>最后更新于:</span> <span data-v-ab079e77></span></span><span class="changelog-button" data-v-ab079e77><span class="vpi-menu" data-v-ab079e77></span><span data-v-ab079e77>查看全部变更历史</span></span></summary><ul class="changelog-list" data-v-ab079e77><!--[--><!--[--><li class="changelog commit" data-v-ab079e77><div data-v-ab079e77><a class="vp-link no-icon link hash" href="https://github.com/ChGoh7/ChGoh7.github.io/tree/docs/commit/835c4162426d05c7d9f94a7d8be87922c23c31e5" target="_blank" rel="noreferrer" data-v-ab079e77 data-v-442a52aa><!--[--><code data-v-ab079e77>835c4</code><!--]--><!----></a><span class="divider" data-v-ab079e77>-</span></div><div data-v-ab079e77><p class="message" data-v-ab079e77>add exams revises</p><span class="datetime" data-v-ab079e77>于 2024/12/27</span></div></li><!--]--><!--]--></ul></details></div><!----></div></main><footer class="vp-doc-footer" data-v-cce51d2d data-v-f7268517><!--[--><!--]--><div class="edit-info" data-v-f7268517><div class="edit-link" data-v-f7268517><a class="vp-link no-icon link edit-link-button" href="https://github.com/ChGoh7/ChGoh7.github.io/edit/docs/docs/DOING/Hadoop期末复习.md" target="_blank" rel="noreferrer" data-v-f7268517 data-v-442a52aa><!--[--><span class="vpi-square-pen edit-link-icon" aria-label="edit icon" data-v-f7268517></span> 编辑此页<!--]--><!----></a></div><!----></div><div class="contributors" aria-label="Contributors" data-v-f7268517><span class="contributors-label" data-v-f7268517>贡献者: </span><span class="contributors-info" data-v-f7268517><!--[--><!--[--><span class="contributor" data-v-f7268517>wuchen</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-f7268517><div class="pager" data-v-f7268517><a class="vp-link no-icon link pager-link prev" href="/article/0bdmx9a6/" data-v-f7268517 data-v-442a52aa><!--[--><span class="desc" data-v-f7268517>上一页</span><span class="title" data-v-f7268517>Hive期末复习</span><!--]--><!----></a></div><div class="pager" data-v-f7268517><a class="vp-link no-icon link pager-link next" href="/article/01jkdtnd/" data-v-f7268517 data-v-442a52aa><!--[--><span class="desc" data-v-f7268517>下一页</span><span class="title" data-v-f7268517>todolist</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-68cd6b44 data-v-c122fdb6><span class="percent" data-allow-mismatch data-v-c122fdb6>0%</span><span class="show icon vpi-back-to-top" data-v-c122fdb6></span><svg aria-hidden="true" data-v-c122fdb6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-c122fdb6></circle></svg></button><footer class="vp-footer" vp-footer data-v-68cd6b44 data-v-7631db44><!--[--><div class="container" data-v-7631db44><p class="message" data-v-7631db44>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-C8n7yTDe.js" defer></script></body></html>